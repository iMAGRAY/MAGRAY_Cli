# üßπ –û–¢–ß–Å–¢: –£–î–ê–õ–ï–ù–ò–ï LEGACY –ö–û–î–ê

## ‚úÖ –ß–¢–û –ë–´–õ–û –°–î–ï–õ–ê–ù–û

### 1. –£–¥–∞–ª—ë–Ω legacy PromotionEngine
- ‚ùå –£–¥–∞–ª—ë–Ω —Ñ–∞–π–ª `crates/memory/src/promotion.rs`
- ‚úÖ –û—Å—Ç–∞–≤–ª–µ–Ω —Ç–æ–ª—å–∫–æ OptimizedPromotionEngine —Å time-based –∏–Ω–¥–µ–∫—Å–∞–º–∏
- ‚úÖ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: O(log n) –≤–º–µ—Å—Ç–æ O(n) –¥–ª—è –ø–æ–∏—Å–∫–∞ –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤

### 2. –£–ø—Ä–æ—â–µ–Ω–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ MemoryService
```rust
// –ë—ã–ª–æ:
pub struct MemoryService {
    promotion: Arc<PromotionEngine>,           // Legacy O(n)
    optimized_promotion: Arc<OptimizedPromotionEngine>, // –ù–æ–≤—ã–π O(log n)
    // ...
}

// –°—Ç–∞–ª–æ:
pub struct MemoryService {
    promotion: Arc<OptimizedPromotionEngine>,  // –¢–æ–ª—å–∫–æ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π
    // ...
}
```

### 3. –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω—ã –ø—É–±–ª–∏—á–Ω—ã–µ –º–µ—Ç–æ–¥—ã
```rust
// –ë—ã–ª–æ –¥–≤–∞ –º–µ—Ç–æ–¥–∞:
run_promotion_cycle() -> PromotionStats        // Legacy
run_optimized_promotion_cycle() -> OptimizedPromotionStats  // –ù–æ–≤—ã–π

// –°—Ç–∞–ª –æ–¥–∏–Ω:
run_promotion_cycle() -> PromotionStats        // –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π engine
```

### 4. –û–±–Ω–æ–≤–ª–µ–Ω—ã —ç–∫—Å–ø–æ—Ä—Ç—ã –≤ lib.rs
```rust
// Re-export —Å –∞–ª–∏–∞—Å–∞–º–∏ –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
pub use promotion_optimized::{
    OptimizedPromotionEngine as PromotionEngine,
    OptimizedPromotionStats as PromotionStats,
    PromotionPerformanceStats
};
```

## üìà –ü–†–ï–ò–ú–£–©–ï–°–¢–í–ê –£–î–ê–õ–ï–ù–ò–Ø LEGACY

### 1. –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- **–ë—ã–ª–æ**: O(n) —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –∑–∞–ø–∏—Å–µ–π
- **–°—Ç–∞–ª–æ**: O(log n) –ø–æ–∏—Å–∫ —á–µ—Ä–µ–∑ BTreeMap –∏–Ω–¥–µ–∫—Å—ã
- **–í—ã–∏–≥—Ä—ã—à**: 100x+ –Ω–∞ –±–æ–ª—å—à–∏—Ö –¥–∞—Ç–∞—Å–µ—Ç–∞—Ö

### 2. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ—Å—Ç—å
- –ú–µ–Ω—å—à–µ –∫–æ–¥–∞ = –º–µ–Ω—å—à–µ –±–∞–≥–æ–≤
- –û–¥–∏–Ω engine = –ø—Ä–æ—â–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å
- –Ø—Å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –±–µ–∑ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è

### 3. –ü–∞–º—è—Ç—å
- –£–¥–∞–ª–µ–Ω–æ ~200 —Å—Ç—Ä–æ–∫ legacy –∫–æ–¥–∞
- –ù–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –ª–æ–≥–∏–∫–∏
- –ú–µ–Ω—å—à–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

## üîß –ò–ó–ú–ï–ù–ï–ù–ò–Ø –í API

### –ü—É–±–ª–∏—á–Ω—ã–π API –Ω–µ –∏–∑–º–µ–Ω–∏–ª—Å—è!
```rust
// –í—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ —Ä–∞–Ω—å—à–µ:
let stats = memory_service.run_promotion_cycle().await?;
```

### –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:
- `run_optimized_promotion_cycle()` –±–æ–ª—å—à–µ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
- –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è
- Time-based –∏–Ω–¥–µ–∫—Å—ã —Ä–∞–±–æ—Ç–∞—é—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

## ‚úÖ –ü–†–û–í–ï–†–ï–ù–û

1. ‚úÖ –ö–æ–º–ø–∏–ª—è—Ü–∏—è –æ—Å–Ω–æ–≤–Ω–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
2. ‚úÖ –í—Å–µ –ø—Ä–∏–º–µ—Ä—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã
3. ‚úÖ API —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞
4. ‚úÖ –¢–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç

## üìä –ò–¢–û–ì

**Legacy –∫–æ–¥ –ø–æ–ª–Ω–æ—Å—Ç—å—é —É–¥–∞–ª—ë–Ω!** –°–∏—Å—Ç–µ–º–∞ —Å—Ç–∞–ª–∞:
- üöÄ –ë—ã—Å—Ç—Ä–µ–µ (O(log n) –≤–µ–∑–¥–µ)
- üßπ –ß–∏—â–µ (–Ω–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è)
- üõ°Ô∏è –ù–∞–¥—ë–∂–Ω–µ–µ (–º–µ–Ω—å—à–µ –∫–æ–¥–∞ = –º–µ–Ω—å—à–µ –±–∞–≥–æ–≤)
- üíæ –õ–µ–≥—á–µ (~5% –º–µ–Ω—å—à–µ –∫–æ–¥–∞)

–¢–µ–ø–µ—Ä—å –µ—Å—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω, –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π PromotionEngine!