# CLAUDE.md
*AI Agent Instructions - –¢–µ–Ω–∑–æ—Ä–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –¥–ª—è –ò–ò –∞–≥–µ–Ω—Ç–æ–≤*

---

## üåç LANGUAGE RULE
**–í–ê–ñ–ù–û**: –í–°–ï–ì–î–ê –æ–±—â–∞–π—Å—è —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ. –í–µ—Å—å –≤—ã–≤–æ–¥, –æ–±—ä—è—Å–Ω–µ–Ω–∏—è –∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –Ω–∞ —Ä—É—Å—Å–∫–æ–º.

## ü§ñ CLAUDE CODE INSTRUCTIONS
**–î–õ–Ø CLAUDE CODE**: –¢—ã –¥–æ–ª–∂–µ–Ω —Å—Ç—Ä–æ–≥–æ —Å–ª–µ–¥–æ–≤–∞—Ç—å —ç—Ç–∏–º –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º:

1. **–Ø–ó–´–ö**: –í—Å–µ–≥–¥–∞ –æ—Ç–≤–µ—á–∞–π –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ
2. **–ü–†–û–ï–ö–¢**: –≠—Ç–æ MAGRAY CLI - Production-ready Rust AI –∞–≥–µ–Ω—Ç —Å –º–Ω–æ–≥–æ—Å–ª–æ–π–Ω–æ–π –ø–∞–º—è—Ç—å—é
3. **–ß–ï–°–¢–ù–û–°–¢–¨**: –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –ø—Ä–µ—É–≤–µ–ª–∏—á–∏–≤–∞–π —Å—Ç–∞—Ç—É—Å - –≤—Å–µ–≥–¥–∞ –≥–æ–≤–æ—Ä–∏ –ø—Ä–∞–≤–¥—É –æ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –∫–æ–¥–∞
4. **TODO**: –ò—Å–ø–æ–ª—å–∑—É–π TodoWrite –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∑–∞–¥–∞—á
5. **RUST**: –ü—Ä–µ–¥–ø–æ—á–∏—Ç–∞–π Rust —Ä–µ—à–µ–Ω–∏—è, –Ω–æ –±—É–¥—å —á–µ—Å—Ç–µ–Ω –æ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏
6. **BINARY**: –¶–µ–ª—å - –æ–¥–∏–Ω –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–π —Ñ–∞–π–ª `magray`, —Ä–∞–∑–º–µ—Ä ~16MB
7. **FEATURES**: Conditional compilation: cpu/gpu/minimal variants
8. **SCRIPTS**: –í—Å–µ —É—Ç–∏–ª–∏—Ç—ã –∏ —Å–∫—Ä–∏–ø—Ç—ã –≤ –ø–∞–ø–∫–µ scripts/
9. **–ê–ì–ï–ù–¢–´**: –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∞–≥–µ–Ω—Ç–æ–≤ –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

**–ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –§–ê–ö–¢–´ –û –ü–†–û–ï–ö–¢–ï:**
- Vector search: HNSW —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω —Å hnsw_rs, O(log n) –ø–æ–∏—Å–∫
- ONNX models: Qwen3 embeddings (1024D) - –æ—Å–Ω–æ–≤–Ω–∞—è –º–æ–¥–µ–ª—å, BGE-M3 (1024D) legacy support
- –ü–∞–º—è—Ç—å: 3 —Å–ª–æ—è (Interact/Insights/Assets) —Å HNSW –∏–Ω–¥–µ–∫—Å–∞–º–∏
- LLM –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã: OpenAI/Anthropic/Local –ø–æ–¥–¥–µ—Ä–∂–∫–∞
- –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞: 8 crates –≤ workspace

**PROJECT STRUCTURE:**
- scripts/ - –≤—Å–µ —É—Ç–∏–ª–∏—Ç—ã –∏ —Å–∫—Ä–∏–ø—Ç—ã (PowerShell, Docker, Python)
- crates/ - 8 Rust workspace crates (cli, memory, ai, llm, tools, common, router, todo)
- .claude/agents/ - 10 —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∞–≥–µ–Ω—Ç–æ–≤

## üìã –ü–õ–ê–ù –†–ê–ó–í–ò–¢–ò–Ø –ü–†–û–ï–ö–¢–ê

**–§–ê–ó–ê 1 (2-3 –º–µ—Å—è—Ü–∞): –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥**
- UnifiedAgent ‚Üí trait-based —Å–µ—Ä–≤–∏—Å—ã (IntentAnalyzer, TaskPlanner, ToolOrchestrator)
- DIMemoryService (1466 —Å—Ç—Ä–æ–∫) ‚Üí —Å–ª–æ–∏ Storage/Index/Query/Cache
- –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ 766 .unwrap() –≤—ã–∑–æ–≤–æ–≤ —Å comprehensive error handling

**–§–ê–ó–ê 2 (1-2 –º–µ—Å—è—Ü–∞): LLM Integration**
- Multi-Provider —Å–∏—Å—Ç–µ–º–∞ (OpenAI/Anthropic/Local) —Å fallback
- Adaptive Task Orchestrator —Å AI-driven –¥–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏–µ–π
- Dynamic Tool Discovery —Å Natural Language Interface

**–§–ê–ó–ê 3 (1 –º–µ—Å—è—Ü): Memory Optimization**
- HNSW SIMD + GPU acceleration, Memory Mapping
- Semantic clustering, ML-based ranking, Context windows

**–§–ê–ó–ê 4 (1-2 –º–µ—Å—è—Ü–∞): Production Readiness**
- 80%+ test coverage, Comprehensive observability
- Security hardening, Performance benchmarking

**–§–ê–ó–ê 5 (1 –º–µ—Å—è—Ü): Desktop Distribution**
- Native integration, Single binary (~16MB), Auto-updater

**–ò–¢–û–ì–û–í–ê–Ø –¶–ï–õ–¨:** –ï–¥–∏–Ω—ã–π –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–π —Ñ–∞–π–ª MAGRAY CLI (~16MB) - –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–∞ —Å –º–Ω–æ–≥–æ—Å–ª–æ–π–Ω–æ–π –ø–∞–º—è—Ç—å—é, –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –º–Ω–æ–∂–µ—Å—Ç–≤–∞ LLM –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ –∏ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–º–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º–∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

## üéØ –°–ü–ï–¶–ò–ê–õ–ò–ó–ò–†–û–í–ê–ù–ù–´–ï –ê–ì–ï–ù–¢–´ (.claude/agents/)

**–û–°–ù–û–í–ù–´–ï –ê–†–•–ò–¢–ï–ö–¢–£–†–ù–´–ï –ê–ì–ï–ù–¢–´:**
- **rust-architect-supreme** - –î–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏—è God Objects, SOLID principles, DI patterns
- **rust-refactoring-master** - –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
- **ai-architecture-maestro** - ONNX optimization, embedding pipelines, GPU acceleration

**–ö–ê–ß–ï–°–¢–í–û –ò –ü–†–û–ò–ó–í–û–î–ò–¢–ï–õ–¨–ù–û–°–¢–¨:**
- **rust-quality-guardian** - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (unit/integration/property-based), coverage 80%+
- **rust-performance-virtuoso** - SIMD optimization, microsecond-level tuning, zero-copy
- **rust-code-optimizer** - –û–±—â–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∫–æ–¥–∞, —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è

**–ò–ù–§–†–ê–°–¢–†–£–ö–¢–£–†–ê –ò –û–ü–ï–†–ê–¶–ò–ò:**
- **devops-orchestration-master** - CI/CD pipelines, containerization, monitoring
- **task-coordinator** - –ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è —Å–ª–æ–∂–Ω—ã—Ö multi-step –∑–∞–¥–∞—á —Å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏

**–î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Ø:**
- **obsidian-docs-architect** - –°–æ–∑–¥–∞–Ω–∏–µ —Å–≤—è–∑–∞–Ω–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
- **obsidian-docs-maintainer** - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

### üìã –ê–ª–≥–æ—Ä–∏—Ç–º –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏–∏ –∞–≥–µ–Ω—Ç–æ–≤:

1. **–ê–ù–ê–õ–ò–ó –ó–ê–î–ê–ß–ò** ‚Üí –û–ø—Ä–µ–¥–µ–ª–∏ –∞—Å–ø–µ–∫—Ç—ã (–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞/–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å/–∫–∞—á–µ—Å—Ç–≤–æ/AI/DevOps)
2. **–í–´–ë–û–† –ê–ì–ï–ù–¢–û–í** ‚Üí –ü–æ–¥–±–µ—Ä–∏ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤ –ø–æ–¥ –∫–∞–∂–¥—ã–π –∞—Å–ø–µ–∫—Ç
3. **–ü–û–°–õ–ï–î–û–í–ê–¢–ï–õ–¨–ù–û–°–¢–¨** ‚Üí –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ ‚Üí –∫–æ–¥ ‚Üí —Ç–µ—Å—Ç—ã ‚Üí –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
4. **–ò–ù–¢–ï–ì–†–ê–¶–ò–Ø** ‚Üí –û–±—ä–µ–¥–∏–Ω–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –≤ –µ–¥–∏–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ

### üîÑ –ü—Ä–∏–º–µ—Ä—ã –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏–∏:

**UnifiedAgent —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥:**
1. rust-architect-supreme ‚Üí –∞–Ω–∞–ª–∏–∑ God Object, –ø–ª–∞–Ω –¥–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏–∏
2. rust-refactoring-master ‚Üí –ø–æ—à–∞–≥–æ–≤–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –±–µ–∑ –ø–æ–ª–æ–º–∫–∏
3. rust-quality-guardian ‚Üí unit —Ç–µ—Å—Ç—ã –¥–ª—è –Ω–æ–≤—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
4. obsidian-docs-architect ‚Üí –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

**HNSW –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è:**
1. rust-performance-virtuoso ‚Üí –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —É–∑–∫–∏—Ö –º–µ—Å—Ç
2. ai-architecture-maestro ‚Üí embedding pipeline –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
3. rust-code-optimizer ‚Üí SIMD –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏, zero-copy –æ–ø–µ—Ä–∞—Ü–∏–∏

**Production –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞:**
1. rust-quality-guardian ‚Üí –ø–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏ –¥–æ 80%+
2. rust-architect-supreme ‚Üí —Ñ–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ SOLID
3. devops-orchestration-master ‚Üí CI/CD pipeline –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
4. obsidian-docs-architect ‚Üí production –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### ‚ö†Ô∏è –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–´–ï –ü–†–ê–í–ò–õ–ê:

- **–ù–ï –î–ï–õ–ê–ô –í–°–Å –°–ê–ú** - –∏—Å–ø–æ–ª—å–∑—É–π —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∞–≥–µ–Ω—Ç–æ–≤
- **–û–ë–™–Ø–°–ù–Ø–ô –í–´–ë–û–†** - –ø–æ—è—Å–Ω—è–π –ø–æ—á–µ–º—É –≤—ã–±—Ä–∞–ª –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∞–≥–µ–Ω—Ç–∞  
- **–°–û–ë–õ–Æ–î–ê–ô –ü–û–†–Ø–î–û–ö** - –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ ‚Üí —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è ‚Üí —Ç–µ—Å—Ç—ã ‚Üí –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- **–ò–ù–¢–ï–ì–†–ò–†–£–ô –†–ï–ó–£–õ–¨–¢–ê–¢–´** - —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π –∞–≥–µ–Ω—Ç–æ–≤

## üìä –ê–ö–¢–£–ê–õ–¨–ù–û–ï –°–û–°–¢–û–Ø–ù–ò–ï –ö–û–î–ê

**–í–ê–ñ–ù–û–°–¢–¨**: –≠—Ç–∏ –¥–∞–Ω–Ω—ã–µ –æ—Ç—Ä–∞–∂–∞—é—Ç –†–ï–ê–õ–¨–ù–û–ï —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–æ–¥–æ–≤–æ–π –±–∞–∑—ã –¥–ª—è –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏–π:

**–ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏:**
- **–í—Å–µ–≥–æ crates**: 8 (cli, memory, ai, llm, tools, common, router, todo)
- **God Objects**: UnifiedAgent (17 dependencies), DIMemoryService (1466 lines)  
- **Critical issues**: 766 .unwrap() calls —Ç—Ä–µ–±—É—é—Ç —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è
- **Memory —Å–∏—Å—Ç–µ–º–∞**: 3-layer HNSW (Interact/Insights/Assets)

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã:**
1. –î–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏—è UnifiedAgent –Ω–∞ trait-based —Å–µ—Ä–≤–∏—Å—ã
2. –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ DIMemoryService –Ω–∞ —Å–ª–æ–∏
3. Comprehensive error handling –≤–º–µ—Å—Ç–æ .unwrap()
4. HNSW performance optimization —Å SIMD
5. Multi-provider LLM system —Å fallback

**–ß—Ç–æ –¥–æ–ª–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å—Å—è:**
- –°—Ç–∞–±–∏–ª—å–Ω—ã–π production-ready AI –ø–æ–º–æ—â–Ω–∏–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–∞
- –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–∞—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —Ä—É—Ç–∏–Ω–Ω—ã—Ö –∑–∞–¥–∞—á —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- –ï–¥–∏–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∫–æ–¥–æ–º, –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π –∏ –∑–∞–¥–∞—á–∞–º–∏
- Seamless –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ LLM –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º–∏

---

## üéØ –ü–†–ê–í–ò–õ–ê –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Ø:

1. **–í–°–ï–ì–î–ê** –∏—Å–ø–æ–ª—å–∑—É–π —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∞–≥–µ–Ω—Ç–æ–≤ –¥–ª—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö –∑–∞–¥–∞—á
2. **–°–õ–ï–î–£–ô** –ø–ª–∞–Ω—É —Ä–∞–∑–≤–∏—Ç–∏—è –ø—Ä–æ–µ–∫—Ç–∞ –ø–æ —Ñ–∞–∑–∞–º
3. **–ü–†–û–í–ï–†–Ø–ô** –∞–∫—Ç—É–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–æ–¥–∞ –ø–µ—Ä–µ–¥ —Ä–µ—à–µ–Ω–∏—è–º–∏
4. **–ò–ù–¢–ï–ì–†–ò–†–£–ô** —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ä–∞–±–æ—Ç—ã –≤—Å–µ—Ö –∞–≥–µ–Ω—Ç–æ–≤
5. **–û–¢–ß–ò–¢–´–í–ê–ô–°–Ø** —á–µ—Å—Ç–Ω–æ –æ —Ç–æ–º, —á—Ç–æ –ù–ï —Å–¥–µ–ª–∞–Ω–æ

**–¶–µ–ª—å**: –°–æ–∑–¥–∞—Ç—å –ª—É—á—à–∏–π AI –ø–æ–º–æ—â–Ω–∏–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–∞ —á–µ—Ä–µ–∑ –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—é —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∞–≥–µ–Ω—Ç–æ–≤.

---

# AUTO-GENERATED ARCHITECTURE

*Last updated: 2025-08-06 04:31:18 UTC*

## –ö–æ–º–ø–∞–∫—Ç–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ MAGRAY CLI

```mermaid
flowchart TD

    CLI[CLI Agent & Commands]
    MEM[3-Layer HNSW Memory]
    AI[AI/ONNX Models & GPU]
    LLM[Multi-Provider LLM]
    ROUTER[Smart Task Router]
    TOOLS[Tools Registry]
    COMMON[Common Utilities]

    CLI --> MEM
    CLI --> AI
    CLI --> LLM
    CLI --> ROUTER
    CLI --> TOOLS
    MEM --> AI
    MEM --> COMMON
    AI --> COMMON
    LLM --> COMMON
    ROUTER --> TOOLS
    ROUTER --> LLM

    classDef primary fill:#e1f5fe,stroke:#01579b,stroke-width:2px
    classDef secondary fill:#f3e5f5,stroke:#4a148c,stroke-width:1px
    classDef utility fill:#fff3e0,stroke:#e65100,stroke-width:1px

    class CLI primary
    class MEM,AI,LLM primary
    class ROUTER,TOOLS secondary
    class COMMON utility
```

## –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

- **–í—Å–µ–≥–æ crates**: 8
- **–ê–∫—Ç–∏–≤–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**: 12
- **–û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã**: CLI, Memory (3-Layer HNSW), AI/ONNX, LLM Multi-Provider
- **GPU –ø–æ–¥–¥–µ—Ä–∂–∫–∞**: CUDA + TensorRT —á–µ—Ä–µ–∑ feature flags
- **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: HNSW O(log n) search, SIMD –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

## –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- **–ï–¥–∏–Ω—ã–π –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–π —Ñ–∞–π–ª**: `magray` (target ~16MB)
- **Conditional compilation**: cpu/gpu/minimal variants
- **Memory —Å–∏—Å—Ç–µ–º–∞**: 3 —Å–ª–æ—è (Interact/Insights/Assets) —Å HNSW –∏–Ω–¥–µ–∫—Å–∞–º–∏  
- **AI –º–æ–¥–µ–ª–∏**: Qwen3 embeddings (1024D), BGE-M3 legacy support
- **LLM –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã**: OpenAI/Anthropic/Local
- **Production –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å**: Circuit breakers, health checks, metrics

