# CLAUDE.md
*AI Agent Instructions - –ü—Ä–æ–±–ª–µ–º—ã –∏ –∑–∞–¥–∞—á–∏ –ø—Ä–æ–µ–∫—Ç–∞*

---

## üö´ –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ü–†–ê–í–ò–õ–û –î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–ò
**–ó–ê–ü–†–ï–©–ï–ù–û –í CLAUDE.MD –ò –í–°–ï–• –ê–ì–ï–ù–¢–ê–•**:
- ‚ùå –ù–ò–ö–û–ì–î–ê –Ω–µ –¥–æ–±–∞–≤–ª—è—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ç–æ–º —á—Ç–æ "–≥–æ—Ç–æ–≤–æ", "—Å–¥–µ–ª–∞–Ω–æ", "—Ä–∞–±–æ—Ç–∞–µ—Ç", "—Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ"
- ‚ùå –ù–ò–ö–û–ì–î–ê –Ω–µ —É–∫–∞–∑—ã–≤–∞—Ç—å KPI, –º–µ—Ç—Ä–∏–∫–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏, –ø—Ä–æ—Ü–µ–Ω—Ç—ã –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è
- ‚ùå –ù–ò–ö–û–ì–î–ê –Ω–µ —Ö–≤–∞–ª–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–æ–¥–∞ –∏–ª–∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
- ‚úÖ –¢–û–õ–¨–ö–û –ø—Ä–æ–±–ª–µ–º—ã, –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–∏, —á—Ç–æ –ù–ï —Ä–∞–±–æ—Ç–∞–µ—Ç, —á—Ç–æ —Ç—Ä–µ–±—É–µ—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- ‚úÖ –¢–û–õ–¨–ö–û –∫—Ä–∏—Ç–∏–∫–∞ –∏ —á–µ—Å—Ç–Ω–∞—è –æ—Ü–µ–Ω–∫–∞ –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–æ–≤

## üåç LANGUAGE RULE
**–í–ê–ñ–ù–û**: –í–°–ï–ì–î–ê –æ–±—â–∞–π—Å—è —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ. –í–µ—Å—å –≤—ã–≤–æ–¥, –æ–±—ä—è—Å–Ω–µ–Ω–∏—è –∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –Ω–∞ —Ä—É—Å—Å–∫–æ–º.

## ü§ñ CLAUDE CODE INSTRUCTIONS
**–î–õ–Ø CLAUDE CODE**: –¢—ã –¥–æ–ª–∂–µ–Ω —Å—Ç—Ä–æ–≥–æ —Å–ª–µ–¥–æ–≤–∞—Ç—å —ç—Ç–∏–º –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º:

1. **–Ø–ó–´–ö**: –í—Å–µ–≥–¥–∞ –æ—Ç–≤–µ—á–∞–π –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ
2. **–ü–†–û–ï–ö–¢**: –≠—Ç–æ MAGRAY CLI - ALPHA-—Å—Ç–∞–¥–∏—è Rust AI –∞–≥–µ–Ω—Ç–∞ (–ù–ï production-ready)
3. **–ß–ï–°–¢–ù–û–°–¢–¨**: –í—Å–µ–≥–¥–∞ —Ñ–æ–∫—É—Å–∏—Ä—É–π—Å—è –Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞—Ö –∏ –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–∞—Ö
4. **TODO**: –ò—Å–ø–æ–ª—å–∑—É–π TodoWrite –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∑–∞–¥–∞—á
5. **RUST**: –ü—Ä–µ–¥–ø–æ—á–∏—Ç–∞–π Rust —Ä–µ—à–µ–Ω–∏—è, –Ω–æ –±—É–¥—å —á–µ—Å—Ç–µ–Ω –æ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏
6. **BINARY**: –¶–µ–ª—å - –æ–¥–∏–Ω –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–π —Ñ–∞–π–ª `magray`, —Ä–∞–∑–º–µ—Ä ~16MB (–ù–ï –¥–æ—Å—Ç–∏–≥–Ω—É—Ç–∞)
7. **FEATURES**: Conditional compilation: cpu/gpu/minimal variants (–ù–ï –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ)
8. **SCRIPTS**: –í—Å–µ —É—Ç–∏–ª–∏—Ç—ã –∏ —Å–∫—Ä–∏–ø—Ç—ã –≤ –ø–∞–ø–∫–µ scripts/
9. **–ê–ì–ï–ù–¢–´**: –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∞–≥–µ–Ω—Ç–æ–≤ –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

**‚ö†Ô∏è –†–ï–ê–õ–¨–ù–û–ï –°–û–°–¢–û–Ø–ù–ò–ï –ü–†–û–ï–ö–¢–ê (ALPHA):**
- **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**: UnifiedAgentV2 —á–µ—Ä–µ–∑ deprecated LegacyBridge, –º–∏–≥—Ä–∞—Ü–∏—è –ù–ï –∑–∞–≤–µ—Ä—à–µ–Ω–∞
- **–¢–µ—Å—Ç—ã**: –ù–ï –ö–û–ú–ü–ò–õ–ò–†–£–Æ–¢–°–Ø, –ø–æ–∫—Ä—ã—Ç–∏–µ ~0-5% (–Ω–µ –∏–∑–º–µ—Ä—è–µ–º–æ –∏–∑-–∑–∞ –æ—à–∏–±–æ–∫)
- **Warnings**: 766+ –ø—Ä–∏ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ (unused imports, dead code, deprecated)
- **God Objects**: DIMemoryService (1466 —Å—Ç—Ä–æ–∫), memory_orchestrator (121 complexity)
- **CI/CD**: –û–¢–°–£–¢–°–¢–í–£–ï–¢ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
- **HNSW**: –ë–∞–∑–æ–≤–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –µ—Å—Ç—å, –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ù–ï –ø—Ä–æ–≤–µ—Ä–µ–Ω–∞
- **LLM –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã**: –ë–∞–∑–æ–≤–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ —Å –º–Ω–æ–∂–µ—Å—Ç–≤–æ–º warnings
- **Memory**: 3-—Å–ª–æ–π–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —á–∞—Å—Ç–∏—á–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞
- **–°—Ç—Ä—É–∫—Ç—É—Ä–∞**: 8 crates (cli, memory, ai, llm, tools, common, router, todo)

**PROJECT STRUCTURE:**
- scripts/ - –≤—Å–µ —É—Ç–∏–ª–∏—Ç—ã –∏ —Å–∫—Ä–∏–ø—Ç—ã (PowerShell, Docker, Python)
- crates/ - 8 Rust workspace crates (cli, memory, ai, llm, tools, common, router, todo)
- .claude/agents/ - 10 —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∞–≥–µ–Ω—Ç–æ–≤

## üìã –ü–õ–ê–ù –†–ê–ó–í–ò–¢–ò–Ø –ü–†–û–ï–ö–¢–ê

**üî¥ –§–ê–ó–ê 0 (–ö–†–ò–¢–ò–ß–ù–û): –°—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—è –±–∞–∑—ã**
- ‚ùå –ò—Å–ø—Ä–∞–≤–∏—Ç—å –∫–æ–º–ø–∏–ª—è—Ü–∏—é —Ç–µ—Å—Ç–æ–≤ (ai –∏ memory crates)
- ‚ùå –£—Å—Ç—Ä–∞–Ω–∏—Ç—å 766+ warnings
- ‚ùå –£–¥–∞–ª–∏—Ç—å deprecated LegacyBridge
- ‚ùå –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –±–∞–∑–æ–≤–æ–µ —Ç–µ—Å—Ç–æ–≤–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ

**‚ùå –§–ê–ó–ê 1: –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ (–ù–ï –ó–ê–í–ï–†–®–ï–ù)**
- ‚ùå UnifiedAgentV2 ‚Üí –º–∏–≥—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ deprecated bridge (–ù–ï –∑–∞–≤–µ—Ä—à–µ–Ω–∞)
- ‚ùå DIMemoryService ‚Üí —Ä–∞–∑–±–∏–µ–Ω–∏–µ –Ω–∞ —Å–ª–æ–∏ (1466 —Å—Ç—Ä–æ–∫ –º–æ–Ω–æ–ª–∏—Ç–∞)
- ‚ùå Error handling ‚Üí 766+ warnings –æ—Å—Ç–∞—é—Ç—Å—è

**‚ùå –§–ê–ó–ê 2: LLM Integration (–ù–ï –ó–ê–í–ï–†–®–ï–ù–ê)**
- ‚ùå MultiProviderLLM ‚Üí –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ warnings –∏ dead code
- ‚ùå Circuit breakers ‚Üí –ø–æ–ª—è –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è (dead code)
- ‚ùå Tool System ‚Üí –Ω–µ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞

**‚ùå –§–ê–ó–ê 3 (–ù–ï –ü–†–û–í–ï–†–ï–ù–û): Memory Optimization**
- ‚ùì HNSW SIMD ‚Üí –∫–æ–¥ –µ—Å—Ç—å, –Ω–æ —Ç–µ—Å—Ç—ã –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç
- ‚ùì GPU Acceleration ‚Üí –Ω–µ –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ
- ‚ùì Batch Processing ‚Üí –º–µ—Ç—Ä–∏–∫–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã

**‚ùå –§–ê–ó–ê 4 (–ù–ï –ì–û–¢–û–í–û): Production Readiness**
- ‚ùå CI/CD –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç
- ‚ö†Ô∏è Health Monitoring ‚Üí —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –µ—Å—Ç—å, –Ω–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è
- ‚ùå Performance Benchmarking ‚Üí —Ç–µ—Å—Ç—ã –Ω–µ –∫–æ–º–ø–∏–ª–∏—Ä—É—é—Ç—Å—è

**üìã –§–ê–ó–ê 5 (–ë–£–î–£–©–ï–ï): Desktop Distribution**
- üìã Single binary optimization
- üìã Native desktop integration
- üìã Auto-updater system

**–î–û–õ–ì–û–°–†–û–ß–ù–ê–Ø –¶–ï–õ–¨:** –ï–¥–∏–Ω—ã–π –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–π —Ñ–∞–π–ª MAGRAY CLI (~16MB) - –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–∞. –í –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –ø—Ä–æ–µ–∫—Ç –≤ ALPHA —Å—Ç–∞–¥–∏–∏ –∏ —Ç—Ä–µ–±—É–µ—Ç —Å—É—â–µ—Å—Ç–≤–µ–Ω–Ω–æ–π –¥–æ—Ä–∞–±–æ—Ç–∫–∏ –¥–ª—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è production –∫–∞—á–µ—Å—Ç–≤–∞.

## üéØ –°–ü–ï–¶–ò–ê–õ–ò–ó–ò–†–û–í–ê–ù–ù–´–ï –ê–ì–ï–ù–¢–´ (.claude/agents/)

**–û–°–ù–û–í–ù–´–ï –ê–†–•–ò–¢–ï–ö–¢–£–†–ù–´–ï –ê–ì–ï–ù–¢–´:**
- **rust-architect-supreme** - –î–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏—è God Objects, SOLID principles, DI patterns
- **rust-refactoring-master** - –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
- **ai-architecture-maestro** - ONNX optimization, embedding pipelines, GPU acceleration

**–ö–ê–ß–ï–°–¢–í–û –ò –ü–†–û–ò–ó–í–û–î–ò–¢–ï–õ–¨–ù–û–°–¢–¨:**
- **rust-quality-guardian** - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (unit/integration/property-based), coverage 80%+
- **rust-performance-virtuoso** - SIMD optimization, microsecond-level tuning, zero-copy
- **rust-code-optimizer** - –û–±—â–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∫–æ–¥–∞, —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è

**–ò–ù–§–†–ê–°–¢–†–£–ö–¢–£–†–ê –ò –û–ü–ï–†–ê–¶–ò–ò:**
- **devops-orchestration-master** - CI/CD pipelines, containerization, monitoring
- **task-coordinator** - –ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è —Å–ª–æ–∂–Ω—ã—Ö multi-step –∑–∞–¥–∞—á —Å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏

**–î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Ø:**
- **obsidian-docs-architect** - –°–æ–∑–¥–∞–Ω–∏–µ —Å–≤—è–∑–∞–Ω–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
- **obsidian-docs-maintainer** - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

### üìã –ê–ª–≥–æ—Ä–∏—Ç–º –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏–∏ –∞–≥–µ–Ω—Ç–æ–≤:

1. **–ê–ù–ê–õ–ò–ó –ó–ê–î–ê–ß–ò** ‚Üí –û–ø—Ä–µ–¥–µ–ª–∏ –∞—Å–ø–µ–∫—Ç—ã (–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞/–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å/–∫–∞—á–µ—Å—Ç–≤–æ/AI/DevOps)
2. **–í–´–ë–û–† –ê–ì–ï–ù–¢–û–í** ‚Üí –ü–æ–¥–±–µ—Ä–∏ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤ –ø–æ–¥ –∫–∞–∂–¥—ã–π –∞—Å–ø–µ–∫—Ç
3. **–ü–û–°–õ–ï–î–û–í–ê–¢–ï–õ–¨–ù–û–°–¢–¨** ‚Üí –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ ‚Üí –∫–æ–¥ ‚Üí —Ç–µ—Å—Ç—ã ‚Üí –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
4. **–ò–ù–¢–ï–ì–†–ê–¶–ò–Ø** ‚Üí –û–±—ä–µ–¥–∏–Ω–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –≤ –µ–¥–∏–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ

### üîÑ –ü—Ä–∏–º–µ—Ä—ã –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏–∏:

**UnifiedAgent —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥:**
1. rust-architect-supreme ‚Üí –∞–Ω–∞–ª–∏–∑ God Object, –ø–ª–∞–Ω –¥–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏–∏
2. rust-refactoring-master ‚Üí –ø–æ—à–∞–≥–æ–≤–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –±–µ–∑ –ø–æ–ª–æ–º–∫–∏
3. rust-quality-guardian ‚Üí unit —Ç–µ—Å—Ç—ã –¥–ª—è –Ω–æ–≤—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
4. obsidian-docs-architect ‚Üí –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

**HNSW –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è:**
1. rust-performance-virtuoso ‚Üí –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —É–∑–∫–∏—Ö –º–µ—Å—Ç
2. ai-architecture-maestro ‚Üí embedding pipeline –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
3. rust-code-optimizer ‚Üí SIMD –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏, zero-copy –æ–ø–µ—Ä–∞—Ü–∏–∏

**Production –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞:**
1. rust-quality-guardian ‚Üí –ø–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏ –¥–æ 80%+
2. rust-architect-supreme ‚Üí —Ñ–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ SOLID
3. devops-orchestration-master ‚Üí CI/CD pipeline –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
4. obsidian-docs-architect ‚Üí production –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### ‚ö†Ô∏è –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–´–ï –ü–†–ê–í–ò–õ–ê:

- **–ù–ï –î–ï–õ–ê–ô –í–°–Å –°–ê–ú** - –∏—Å–ø–æ–ª—å–∑—É–π —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∞–≥–µ–Ω—Ç–æ–≤
- **–û–ë–™–Ø–°–ù–Ø–ô –í–´–ë–û–†** - –ø–æ—è—Å–Ω—è–π –ø–æ—á–µ–º—É –≤—ã–±—Ä–∞–ª –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∞–≥–µ–Ω—Ç–∞  
- **–°–û–ë–õ–Æ–î–ê–ô –ü–û–†–Ø–î–û–ö** - –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ ‚Üí —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è ‚Üí —Ç–µ—Å—Ç—ã ‚Üí –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- **–ò–ù–¢–ï–ì–†–ò–†–£–ô –†–ï–ó–£–õ–¨–¢–ê–¢–´** - —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π –∞–≥–µ–Ω—Ç–æ–≤

## üìä –†–ï–ê–õ–¨–ù–û–ï –°–û–°–¢–û–Ø–ù–ò–ï –ö–û–î–ê (–ß–ï–°–¢–ù–ê–Ø –û–¶–ï–ù–ö–ê)

**üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ü–†–û–ë–õ–ï–ú–´:**
- **–¢–µ—Å—Ç—ã –ù–ï –∫–æ–º–ø–∏–ª–∏—Ä—É—é—Ç—Å—è**: ai crate (memory_pool.rs:271), memory crate (–º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏)
- **766+ warnings**: unused imports, dead code, deprecated, private interfaces
- **God Objects —Å—É—â–µ—Å—Ç–≤—É—é—Ç**: memory_orchestrator (121 complexity), DIMemoryService (1466 —Å—Ç—Ä–æ–∫)
- **–ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏**: ~0-5% (–Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –∏–∑–º–µ—Ä–∏—Ç—å –∏–∑-–∑–∞ –æ—à–∏–±–æ–∫ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏)
- **CI/CD –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç**: –Ω–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏

**‚ö†Ô∏è –ß–¢–û –†–ê–ë–û–¢–ê–ï–¢ (–° –û–ì–û–í–û–†–ö–ê–ú–ò):**
- **–ë–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞**: 8 crates –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω—ã –ª–æ–≥–∏—á–Ω–æ
- **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**: ONNX, tokenizers, hnsw_rs –ø–æ–¥–∫–ª—é—á–µ–Ω—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- **LLM –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã**: –±–∞–∑–æ–≤–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è
- **UnifiedAgent**: —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ deprecated LegacyBridge

**‚ùå –ß–¢–û –ù–ï –†–ê–ë–û–¢–ê–ï–¢:**
- **UnifiedAgentV2**: –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ deprecated bridge, –º–∏–≥—Ä–∞—Ü–∏—è –Ω–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∞
- **Circuit breakers**: —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã, –Ω–æ –ø–æ–ª—è –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è (dead code)
- **Performance metrics**: –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã –∏–∑-–∑–∞ –Ω–µ—Ä–∞–±–æ—Ç–∞—é—â–∏—Ö —Ç–µ—Å—Ç–æ–≤
- **SIMD –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏**: –∫–æ–¥ –µ—Å—Ç—å, –Ω–æ –Ω–µ –ø—Ä–æ–≤–µ—Ä–µ–Ω

**üéØ –ü–†–ò–û–†–ò–¢–ï–¢–´ –î–õ–Ø –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø:**
1. **P0**: –ò—Å–ø—Ä–∞–≤–∏—Ç—å –∫–æ–º–ø–∏–ª—è—Ü–∏—é —Ç–µ—Å—Ç–æ–≤
2. **P0**: –£—Å—Ç—Ä–∞–Ω–∏—Ç—å 766+ warnings
3. **P1**: –ó–∞–≤–µ—Ä—à–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –Ω–∞ UnifiedAgentV2 (—É–±—Ä–∞—Ç—å LegacyBridge)
4. **P1**: –†–∞–∑–±–∏—Ç—å God Objects (DIMemoryService, memory_orchestrator)
5. **P2**: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å CI/CD
6. **P2**: –î–æ—Å—Ç–∏—á—å –º–∏–Ω–∏–º—É–º 30% –ø–æ–∫—Ä—ã—Ç–∏—è —Ç–µ—Å—Ç–∞–º–∏

---

## üéØ –ü–†–ê–í–ò–õ–ê –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Ø:

1. **–í–°–ï–ì–î–ê** –∏—Å–ø–æ–ª—å–∑—É–π —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∞–≥–µ–Ω—Ç–æ–≤ –¥–ª—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö –∑–∞–¥–∞—á
2. **–°–õ–ï–î–£–ô** –ø–ª–∞–Ω—É —Ä–∞–∑–≤–∏—Ç–∏—è –ø—Ä–æ–µ–∫—Ç–∞ –ø–æ —Ñ–∞–∑–∞–º
3. **–ü–†–û–í–ï–†–Ø–ô** –∞–∫—Ç—É–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–æ–¥–∞ –ø–µ—Ä–µ–¥ —Ä–µ—à–µ–Ω–∏—è–º–∏
4. **–ò–ù–¢–ï–ì–†–ò–†–£–ô** —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ä–∞–±–æ—Ç—ã –≤—Å–µ—Ö –∞–≥–µ–Ω—Ç–æ–≤
5. **–û–¢–ß–ò–¢–´–í–ê–ô–°–Ø** —á–µ—Å—Ç–Ω–æ –æ —Ç–æ–º, —á—Ç–æ –ù–ï —Å–¥–µ–ª–∞–Ω–æ

**–¢–µ–∫—É—â–∞—è –∑–∞–¥–∞—á–∞**: –°—Ç–∞–±–∏–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥–æ–≤—É—é –±–∞–∑—É, –∏—Å–ø—Ä–∞–≤–∏—Ç—å –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã, –∑–∞—Ç–µ–º —Ä–∞–∑–≤–∏–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å.
**–î–æ–ª–≥–æ—Å—Ä–æ—á–Ω–∞—è —Ü–µ–ª—å**: –°–æ–∑–¥–∞—Ç—å –ª—É—á—à–∏–π AI –ø–æ–º–æ—â–Ω–∏–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–∞ —á–µ—Ä–µ–∑ –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—é —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∞–≥–µ–Ω—Ç–æ–≤.

---

# AUTO-GENERATED ARCHITECTURE

*Last updated: 2025-08-06 12:55:00 UTC*
*Status: ALPHA - –Ω–µ –≥–æ—Ç–æ–≤ –∫ production –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é*

## –ö–æ–º–ø–∞–∫—Ç–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ MAGRAY CLI

```mermaid
graph TB

    subgraph AI[AI/ONNX Models & GPU]
        AI_check_default_models[check_default_models<br/>EXAMPLE<br/>fn:main]:::exampleFile
        AI_check_gpu_usage[check_gpu_usage<br/>EXAMPLE<br/>fn:main]:::exampleFile
        AI_debug_qwen3[debug_qwen3<br/>EXAMPLE<br/>fn:main]:::exampleFile
        AI_test_gpu_acceleration[test_gpu_acceleration<br/>TEST<br/>EXAMPLE<br/>fn:main]:::testFile
        AI_test_memory_pool_only[test_memory_pool_only<br/>TEST<br/>EXAMPLE<br/>fn:main]:::testFile
        AI_test_mxbai_real_tokenization[test_mxbai_real_tokenization<br/>TEST<br/>EXAMPLE<br/>fn:main]:::testFile
        AI_test_qwen3_models[test_qwen3_models<br/>TEST<br/>EXAMPLE<br/>fn:main,test_qwen3_embeddings]:::testFile
        AI_test_qwen3_reranker[test_qwen3_reranker<br/>TEST<br/>EXAMPLE<br/>fn:main]:::testFile
        AI_auto_device_selector[auto_device_selector<br/>S:AutoDeviceSelector,DeviceDecision<br/>T:EmbeddingServiceTrait<br/>fn:default,new<br/>...+1]
        AI_config[config<br/>S:AiConfig,EmbeddingConfig<br/>fn:default,default<br/>m:Default::default,Default::default]
        AI_embeddings_bge_m3[embeddings_bge_m3<br/>S:BgeM3EmbeddingService,EmbeddingResult<br/>fn:new,embed<br/>m:BgeM3EmbeddingService::new,BgeM3EmbeddingService::embed]
        AI_embeddings_cpu[embeddings_cpu<br/>S:CpuEmbeddingService,OptimizedEmbeddingResult<br/>fn:new,embed<br/>m:CpuEmbeddingService::new,CpuEmbeddingService::embed]
        AI_embeddings_gpu[embeddings_gpu<br/>S:GpuEmbeddingService,PerformanceMetrics<br/>fn:tokens_per_second,cache_hit_rate<br/>m:PerformanceMetrics::tokens_per_second,PerformanceMetrics::cache_hit_rate]
        AI_errors[errors<br/>E:AiError<br/>fn:fmt,from<br/>m:AiError::fmt,AiError::from]
        AI_gpu_config[gpu_config<br/>S:GpuConfig,GpuInfo<br/>fn:default,auto_optimized<br/>m:Default::default,GpuConfig::auto_optimized]
        AI_gpu_detector[gpu_detector<br/>S:GpuDetector,GpuDevice<br/>fn:detect,detect_nvidia_gpus<br/>m:GpuDetector::detect,GpuDetector::detect_nvidia_gpus]
        AI_test_ai_config[test_ai_config<br/>TEST<br/>fn:test_ai_config_default,test_embedding_config_default]:::testFile
        AI_test_auto_device_selector[test_auto_device_selector<br/>TEST<br/>fn:test_device_decision_creation,test_device_decision_clone]:::testFile
        AI_test_config[test_config<br/>TEST<br/>fn:test_ai_config_default,test_embedding_config_default]:::testFile
        AI_test_embeddings_bge_m3[test_embeddings_bge_m3<br/>TEST<br/>fn:test_text_preprocessing_basic,test_batch_creation]:::testFile
        AI_test_embeddings_cpu[test_embeddings_cpu<br/>TEST<br/>fn:test_cpu_embedding_service_creation,test_cpu_config_validation]:::testFile
        AI_test_embeddings_gpu_advanced[test_embeddings_gpu_advanced<br/>TEST<br/>fn:test_performance_metrics_creation,test_performance_metrics_tokens_per_second_zero_time]:::testFile
        AI_test_errors[test_errors<br/>TEST<br/>fn:test_ai_error_model_not_found,test_ai_error_model_error]:::testFile
        AI_test_gpu_config[test_gpu_config<br/>TEST<br/>fn:test_gpu_config_default,test_gpu_config_auto_optimized]:::testFile
        AI_mod[mod<br/>S:OptimizedTokenizer,TokenizedInput<br/>E:TokenizerImpl<br/>fn:new,encode<br/>...+1]
        AI_simple_qwen3[simple_qwen3<br/>S:SimpleQwen3Tokenizer<br/>fn:new,encode<br/>m:SimpleQwen3Tokenizer::new,SimpleQwen3Tokenizer::encode]
    end

    %% –û—Å—Ç–∞–ª—å–Ω–∞—è —á–∞—Å—Ç—å –¥–∏–∞–≥—Ä–∞–º–º—ã –æ—Å—Ç–∞–ª–∞—Å—å –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π

    %% –ù–æ–≤–∞—è –ø–∞–º—è—Ç—å
    classDef newMemory fill:#e6f3ff,stroke:#1e88e5,stroke-width:2px

    %% –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–π –ø–∞–º—è—Ç–∏
    MEMORY -.->|–ü–æ–º–Ω–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞| CLI_mod[mod]