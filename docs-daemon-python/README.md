# CTL v3.0 Tensor Sync Daemon (Python)

–ë—ã—Å—Ç—Ä–∞—è –∏ –≥–∏–±–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ CTL –∞–Ω–Ω–æ—Ç–∞—Ü–∏–π —Å –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å—é –∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º –≤ —è–∑—ã–∫–µ CTL.

## üéØ –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å** - –ø—Ä–æ—Å—Ç–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —á–µ—Ä–µ–∑ `settings.json`
- **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ CTL v2.0** - JSON —Ñ–æ—Ä–º–∞—Ç `// @component: {...}`
- **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ CTL v3.0** - Tensor —Ñ–æ—Ä–º–∞—Ç `// @ctl3: »æ[id:type] := {...}`
- **Unicode + ASCII** - —Ç–µ–Ω–∑–æ—Ä–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã –∏ ASCII –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã
- **–ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** - –ª–µ–≥–∫–æ —Ä–∞—Å—à–∏—Ä—è—Ç—å –Ω–æ–≤—ã–º–∏ –ø–∞—Ä—Å–µ—Ä–∞–º–∏
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è** - jsonschema + pydantic –ø—Ä–æ–≤–µ—Ä–∫–∏
- **–§–∞–π–ª–æ–≤—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** - –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞
```bash
cd docs-daemon-python
pip install -e .
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
```bash
# –û–¥–Ω–æ—Ä–∞–∑–æ–≤–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è
ctl-sync once

# –†–µ–∂–∏–º –Ω–∞–±–ª—é–¥–µ–Ω–∏—è –∑–∞ —Ñ–∞–π–ª–∞–º–∏  
ctl-sync watch

# –ü–æ–∫–∞–∑–∞—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
ctl-sync stats
```

## üîÑ –ü–æ—Å—Ç–æ—è–Ω–Ω—ã–π –∑–∞–ø—É—Å–∫ –¥–µ–º–æ–Ω–∞

### 1. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π startup (Windows)
```bash
# –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ —É–¥–æ–±–Ω—ã–π —Å–∫—Ä–∏–ø—Ç
start_daemon.bat

# –ò–ª–∏ –Ω–∞–ø—Ä—è–º—É—é
python -m ctl_sync.main watch
```

### 2. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ daemon_manager
```bash
# –ü–æ–ª–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫ + –∑–∞–ø—É—Å–∫
python daemon_manager.py sync

# –¢–æ–ª—å–∫–æ –∑–∞–ø—É—Å–∫
python daemon_manager.py start

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞
python daemon_manager.py stop

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
python daemon_manager.py restart

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
python daemon_manager.py validate
```

### 3. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å claude-md-orchestrator
–ê–≥–µ–Ω—Ç `claude-md-orchestrator` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è CTL –ø—Ä–∞–≤–∏–ª –≤ CLAUDE.md
- –û–±–Ω–æ–≤–ª—è–µ—Ç settings.json —Å –Ω–æ–≤—ã–º–∏ –ø–∞—Ç—Ç–µ—Ä–Ω–∞–º–∏
- –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç –¥–µ–º–æ–Ω –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö
- –í–∞–ª–∏–¥–∏—Ä—É–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã

–ù–∏–∫–∞–∫–∏—Ö —Ä—É—á–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è!

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —á–µ—Ä–µ–∑ settings.json

**–ì–ª–∞–≤–Ω–∞—è –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å** - –≤—Å—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤ –æ–¥–Ω–æ–º JSON —Ñ–∞–π–ª–µ:

```json
{
  "project": {
    "name": "MAGRAY_CLI",
    "crates_dir": "crates",
    "claude_md_file": "CLAUDE.md"
  },
  "parsing": {
    "ctl2": {
      "enabled": true,
      "patterns": ["//\\s*@component:\\s*(\\{.*\\})"]
    },
    "ctl3": {
      "enabled": true,
      "patterns": ["//\\s*@ctl3:\\s*([‚±ßD]\\[.*?\\]\\s*:=\\s*\\{[^}]*\\})"],
      "tensor_symbols": {
        "unicode": ["‚äó", "‚äï", "‚àá"],
        "ascii": ["compose", "parallel", "grad"]
      }
    }
  },
  "validation": {
    "component": {
      "valid_kinds": ["T", "A", "B", "F", "M", "S", "R", "P", "D", "C", "E"],
      "required_fields": ["k", "id", "t"]
    }
  },
  "features": {
    "colored_output": true,
    "statistics": true
  }
}
```

### –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä –Ω–∞—Å—Ç—Ä–æ–µ–∫

```bash
# –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
python config_editor.py show

# –ü–æ–ª—É—á–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ
python config_editor.py get project.name

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ
python config_editor.py set project.name "My Project"

# –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
python config_editor.py interactive

# –ü–æ–∏—Å–∫ –Ω–∞—Å—Ç—Ä–æ–µ–∫
python config_editor.py search "gpu"

# –°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
python config_editor.py create-default
```

## üìä –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã

### CTL v2.0 (JSON)
```rust
// @component: {"k":"C","id":"vector_store","t":"Vector storage with HNSW","m":{"cur":65,"tgt":95,"u":"%"}}
```

### CTL v3.0 (Tensor)
```rust
// @ctl3: »æ[vector_optimizer:service] := {‚àá[85‚Üí100] ‚äó[gpu_engine,cpu_fallback] ‚äïasync}
```

### ASCII –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã
```rust
// @ctl3: D[ml_coordinator:orchestrator] := {grad[70->95] compose[tensor_optimizer,batch_processor]}
```

## üîß –ê–¥–∞–ø—Ç–∞—Ü–∏—è –∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º CTL

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞ CTL v4.0

1. **–û–±–Ω–æ–≤–∏—Ç—å settings.json**:
```json
{
  "parsing": {
    "ctl4": {
      "enabled": true,
      "patterns": ["//\\s*@ctl4:\\s*<–Ω–æ–≤—ã–π_–ø–∞—Ç—Ç–µ—Ä–Ω>"],
      "new_operators": ["‚ö°", "üî•", "‚≠ê"]
    }
  }
}
```

2. **–°–æ–∑–¥–∞—Ç—å parser**:
```python
# ctl_sync/parsers/ctl4_parser.py
class Ctl4Parser(BaseParser):
    def setup_patterns(self):
        patterns = self.config.get("parsing.ctl4.patterns", [])
        # –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–∞—Ä—Å–µ—Ä–∞
```

3. **–ü–æ–¥–∫–ª—é—á–∏—Ç—å –≤ core.py**:
```python
if self.config.is_ctl4_enabled():
    self.ctl4_parser = Ctl4Parser()
```

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏

–ü—Ä–æ—Å—Ç–æ –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `settings.json`:
```json
{
  "validation": {
    "component": {
      "valid_kinds": ["T", "A", "B", "F", "M", "S", "R", "P", "D", "C", "E", "X"],
      "max_id_length": 64,
      "new_required_fields": ["k", "id", "t", "version"]
    }
  }
}
```

### –ù–æ–≤—ã–µ —Ç–µ–Ω–∑–æ—Ä–Ω—ã–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã

```json
{
  "parsing": {
    "ctl3": {
      "tensor_symbols": {
        "unicode": ["‚äó", "‚äï", "‚àá", "‚ö°", "üî•"],
        "ascii": ["compose", "parallel", "grad", "lightning", "fire"]
      }
    }
  }
}
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
docs-daemon-python/
‚îú‚îÄ‚îÄ settings.json           # –ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª –Ω–∞—Å—Ç—Ä–æ–µ–∫
‚îú‚îÄ‚îÄ config_editor.py        # –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä –Ω–∞—Å—Ç—Ä–æ–µ–∫
‚îú‚îÄ‚îÄ ctl_sync/
‚îÇ   ‚îú‚îÄ‚îÄ core.py            # –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ json_config.py     # –°–∏—Å—Ç–µ–º–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ JSON
‚îÇ   ‚îú‚îÄ‚îÄ schema.py          # –í–∞–ª–∏–¥–∞—Ü–∏—è CTL –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ parsers/           # –ú–æ–¥—É–ª—å–Ω—ã–µ –ø–∞—Ä—Å–µ—Ä—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ base_parser.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ctl2_parser.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ctl3_parser.py
‚îÇ   ‚îú‚îÄ‚îÄ utils.py           # –£—Ç–∏–ª–∏—Ç—ã –∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ watchers.py        # –§–∞–π–ª–æ–≤—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
‚îÇ   ‚îî‚îÄ‚îÄ main.py           # CLI –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
‚îî‚îÄ‚îÄ tests/                 # –¢–µ—Å—Ç—ã
```

## üé® –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
```bash
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
ctl-sync once

# –° –¥–µ—Ç–∞–ª—å–Ω—ã–º –≤—ã–≤–æ–¥–æ–º
ctl-sync once --verbose

# –î—Ä—É–≥–æ–π –ø—Ä–æ–µ–∫—Ç
ctl-sync once --project-root /path/to/project
```

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫
```bash
# –û—Ç–∫–ª—é—á–∏—Ç—å —Ü–≤–µ—Ç–Ω–æ–π –≤—ã–≤–æ–¥
python config_editor.py set features.colored_output false

# –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤–æ–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤
python config_editor.py set scanning.file_extensions '[".rs", ".toml", ".md"]'

# –ò–∑–º–µ–Ω–∏—Ç—å –º–∞—Ä–∫–µ—Ä —Å–µ–∫—Ü–∏–∏ –≤ CLAUDE.md
python config_editor.py set output.claude_md.section_marker "# COMPONENTS"
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
```bash
# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
ctl-sync stats

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫
python config_editor.py validate

# –ü–æ–∏—Å–∫ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
python config_editor.py search "gpu"
```

## üöÄ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–∞–¥ Rust –≤–µ—Ä—Å–∏–µ–π

1. **–ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è** - –∏–∑–º–µ–Ω–µ–Ω–∏—è —á–µ—Ä–µ–∑ `settings.json` –±–µ–∑ –ø–µ—Ä–µ–∫–æ–º–ø–∏–ª—è—Ü–∏–∏
2. **–ü—Ä–æ—Å—Ç–æ—Ç–∞ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è** - –Ω–æ–≤—ã–µ –ø–∞—Ä—Å–µ—Ä—ã –Ω–∞ Python –∑–∞ –º–∏–Ω—É—Ç—ã
3. **–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞** - GUI-–ø–æ–¥–æ–±–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —á–µ—Ä–µ–∑ `config_editor.py`
4. **–ë—ã—Å—Ç—Ä–∞—è –æ—Ç–ª–∞–¥–∫–∞** - –Ω–µ—Ç —ç—Ç–∞–ø–∞ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏
5. **–ì–∏–±–∫–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è** - –ª–µ–≥–∫–æ –∏–∑–º–µ–Ω—è–µ–º—ã–µ —Å—Ö–µ–º—ã

## üéØ –ò–¥–µ–∞–ª—å–Ω–æ –¥–ª—è

- **–ë—ã—Å—Ç—Ä–æ–µ –ø—Ä–æ—Ç–æ—Ç–∏–ø–∏—Ä–æ–≤–∞–Ω–∏–µ** –Ω–æ–≤—ã—Ö CTL —Ñ–æ—Ä–º–∞—Ç–æ–≤
- **–≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** —Å —Ç–µ–Ω–∑–æ—Ä–Ω—ã–º–∏ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞–º–∏
- **–ê–¥–∞–ø—Ç–∞—Ü–∏—è** –∫ –∏–∑–º–µ–Ω—è—é—â–∏–º—Å—è —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º
- **–û–±—É—á–µ–Ω–∏–µ** –∏ –ø–æ–Ω–∏–º–∞–Ω–∏–µ CTL —è–∑—ã–∫–∞
- **–ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è** –ø–æ–¥ —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–µ–∫—Ç—ã

–≠—Ç–æ—Ç Python daemon —Å–æ–∑–¥–∞–Ω —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —Å–∫–æ—Ä–æ—Å—Ç–∏ –∞–¥–∞–ø—Ç–∞—Ü–∏–∏ –∫ —ç–≤–æ–ª—é—Ü–∏–∏ —è–∑—ã–∫–∞ CTL!