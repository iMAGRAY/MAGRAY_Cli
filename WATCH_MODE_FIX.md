# –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï WATCH MODE - –ü–†–û–ë–õ–ï–ú–ê –ò –†–ï–®–ï–ù–ò–ï

## üêõ –ü–†–û–ë–õ–ï–ú–ê
–ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ `cargo run -- watch` sync daemon –≤–≤–æ–¥–∏–ª –Ω—É–ª–µ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ, —Ç–µ—Ä—è—è –≤—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ CTL –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã.

## üîç –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê

### –°–∏–º–ø—Ç–æ–º—ã:
- `cargo run --release` –Ω–∞—Ö–æ–¥–∏–ª 8 –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ ‚úÖ
- `cargo run -- watch` –Ω–∞—Ö–æ–¥–∏–ª 0 –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ ‚ùå
- –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ñ–∞–π–ª–æ–≤ –≤ watch —Ä–µ–∂–∏–º–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏—Å—á–µ–∑–∞–ª–∏

### –ö–æ—Ä–Ω–µ–≤–∞—è –ø—Ä–∏—á–∏–Ω–∞:
Daemon –∑–∞–≥—Ä—É–∂–∞–ª —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏–∑ CLAUDE.md —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ, –∞ –∑–∞—Ç–µ–º –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ñ–∞–π–ª–∞ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–ª —Ç–æ–ª—å–∫–æ –∏–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã, —Ç–µ—Ä—è—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏–∑ –Ω–µ–∏–∑–º–µ–Ω—ë–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤.

## ‚öôÔ∏è –¢–ï–•–ù–ò–ß–ï–°–ö–û–ï –†–ï–®–ï–ù–ò–ï

### –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
```rust
// –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ - —Ç–æ–ª—å–∫–æ –∏–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
if self.cache.hashes.get(&relative_path).map_or(true, |h| h != &hash) {
    // –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –∏–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
    let new_components = self.extract_components(&content, &relative_path);
    // –¢–µ—Ä—è–µ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏–∑ –¥—Ä—É–≥–∏—Ö —Ñ–∞–π–ª–æ–≤!
}
```

### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
```rust
// –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ - –≤—Å–µ–≥–¥–∞ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ —Ñ–∞–π–ª—ã
if self.cache.hashes.get(&relative_path).map_or(true, |h| h != &hash) {
    // –û—Ç–º–µ—Ç–∏—Ç—å –∫–∞–∫ –∏–∑–º–µ–Ω—ë–Ω–Ω—ã–π
    changed = true;
}

// –í–°–ï–ì–î–ê –∏–∑–≤–ª–µ–∫–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏–∑ –í–°–ï–• —Ñ–∞–π–ª–æ–≤
if let Ok(content) = fs::read_to_string(path) {
    let file_components = self.extract_components(&content, &relative_path);
    all_components.extend(file_components);
}
```

## ‚úÖ –†–ï–ó–£–õ–¨–¢–ê–¢ –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø

### One-time —Ä–µ–∂–∏–º:
```bash
cd docs-daemon && cargo run --release
# ‚úÖ –ù–∞—Ö–æ–¥–∏—Ç 8 –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
# ‚úÖ –û–±–Ω–æ–≤–ª—è–µ—Ç CLAUDE.md –ø—Ä–∞–≤–∏–ª—å–Ω–æ
```

### Watch —Ä–µ–∂–∏–º:
```bash
cd docs-daemon && cargo run --release -- watch
# ‚úÖ –ù–∞—Ö–æ–¥–∏—Ç –≤—Å–µ 8 –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
# ‚úÖ –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö
# ‚úÖ –û–±–Ω–æ–≤–ª—è–µ—Ç —Ç–æ–ª—å–∫–æ timestamp –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π
```

## üß™ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï

–°–æ–∑–¥–∞–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ç–µ—Å—Ç `test_watch_mode.ps1`:
1. –ó–∞–ø—É—Å–∫–∞–µ—Ç daemon –≤ watch —Ä–µ–∂–∏–º–µ
2. –ò–∑–º–µ–Ω—è–µ—Ç —Ñ–∞–π–ª —Å CTL –∞–Ω–Ω–æ—Ç–∞—Ü–∏–µ–π  
3. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã
4. –û—Ç–∫–∞—Ç—ã–≤–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è
5. –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç daemon

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: ‚úÖ –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã

## üìä –ü–†–û–ò–ó–í–û–î–ò–¢–ï–õ–¨–ù–û–°–¢–¨

### –ö–æ–º–ø—Ä–æ–º–∏—Å—Å —Ä–µ—à–µ–Ω–∏—è:
- **–ü–ª—é—Å**: –ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö
- **–ú–∏–Ω—É—Å**: –ù–µ–º–Ω–æ–≥–æ –º–µ–¥–ª–µ–Ω–Ω–µ–µ (—Å–∫–∞–Ω–∏—Ä—É–µ—Ç –≤—Å–µ —Ñ–∞–π–ª—ã)
- **–í–µ—Ä–¥–∏–∫—Ç**: –ü—Ä–∏–µ–º–ª–µ–º–æ –¥–ª—è 119 —Ñ–∞–π–ª–æ–≤ (~2 —Å–µ–∫—É–Ω–¥—ã)

### –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è (–Ω–µ –≤—ã–±—Ä–∞–Ω—ã):
1. **–ö—ç—à –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –≤ –ø–∞–º—è—Ç–∏** - —Å–ª–æ–∂–Ω–µ–µ, —Ä–∏—Å–∫ —Ä–∞—Å—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
2. **–ò–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö** - –∏–∑–±—ã—Ç–æ—á–Ω–æ –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ –º–∞—Å—à—Ç–∞–±–∞
3. **–ü–∞—Ä—Ü–∏–∞–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ** - —Ä–∏—Å–∫–æ–≤–∞–Ω–Ω–æ, —Å–ª–æ–∂–Ω–∞—è –ª–æ–≥–∏–∫–∞

## üöÄ –ì–û–¢–û–í–ù–û–°–¢–¨ –ö –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Æ

**Watch —Ä–µ–∂–∏–º —Ç–µ–ø–µ—Ä—å –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–µ–Ω:**

```bash
# –î–ª—è –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
./docs-daemon/target/release/ctl-sync.exe watch

# –î–ª—è CI/CD
./docs-daemon/target/release/ctl-sync.exe  # one-time
```

**–ì–∞—Ä–∞–Ω—Ç–∏–∏:**
- ‚úÖ –ù–∏–∫–æ–≥–¥–∞ –Ω–µ —Ç–µ—Ä—è–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- ‚úÖ –û–±–Ω–æ–≤–ª—è–µ—Ç —Ç–æ–ª—å–∫–æ –ø—Ä–∏ —Ä–µ–∞–ª—å–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö
- ‚úÖ –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤–∞–ª–∏–¥–∞—Ü–∏—é JSON —Å—Ö–µ–º—ã
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ –≤ –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–º —Ä–µ–∂–∏–º–µ