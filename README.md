# MAGRAY CLI üöÄ

–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π CLI –∞–≥–µ–Ω—Ç –Ω–∞ Rust —Å –º–Ω–æ–≥–æ—Å–ª–æ–π–Ω–æ–π –ø–∞–º—è—Ç—å—é, –≤–µ–∫—Ç–æ—Ä–Ω—ã–º –ø–æ–∏—Å–∫–æ–º –∏ —Ä–∞—Å—à–∏—Ä—è–µ–º–æ–π —Å–∏—Å—Ç–µ–º–æ–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤. –ü–æ—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –∫–∞–∫ –µ–¥–∏–Ω—ã–π –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–π —Ñ–∞–π–ª –±–µ–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π.

[![Rust](https://img.shields.io/badge/rust-%23000000.svg?style=for-the-badge&logo=rust&logoColor=white)](https://www.rust-lang.org/)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](LICENSE)
[![Build Status](https://img.shields.io/github/actions/workflow/status/yourusername/MAGRAY_Cli/build-matrix.yml?branch=main)](https://github.com/yourusername/MAGRAY_Cli/actions)

## ‚ú® –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üèÉ **–ï–¥–∏–Ω—ã–π –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–π —Ñ–∞–π–ª** - —É—Å—Ç–∞–Ω–æ–≤–∫–∞ —á–µ—Ä–µ–∑ `cargo install`, –±–µ–∑ Python/Node/Docker
- üß† **–¢—Ä—ë—Ö—Å–ª–æ–π–Ω–∞—è –ø–∞–º—è—Ç—å** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º —Å –ø—Ä–æ–¥–≤–∏–∂–µ–Ω–∏–µ–º/—É–≥–∞—Å–∞–Ω–∏–µ–º
- ‚ö° **HNSW –≤–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫** - –ø–æ–∏—Å–∫ –∑–∞ <5–º—Å —Å professional hnsw_rs —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–µ–π
- ü§ñ **–õ–æ–∫–∞–ª—å–Ω—ã–π AI —Å—Ç–µ–∫** - ONNX —ç–º–±–µ–¥–¥–∏–Ω–≥–∏/—Ä–µ—Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏–µ, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ LLM –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã
- üîß **–†–∞—Å—à–∏—Ä—è–µ–º—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã** - —Ñ–∞–π–ª–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏, git –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è, shell –∫–æ–º–∞–Ω–¥—ã
- üìä **–ù–∞–±–ª—é–¥–∞–µ–º–æ—Å—Ç—å** - –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ, –º–µ—Ç—Ä–∏–∫–∏ –∏ —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞ —Å–æ–±—ã—Ç–∏–π
- üõ°Ô∏è **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –ø–∞–º—è—Ç–∏** - 100% Rust –±–µ–∑ unsafe –±–ª–æ–∫–æ–≤ –≤ core

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏–∑ crates.io (–∫–æ–≥–¥–∞ –±—É–¥–µ—Ç –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω)
cargo install magray

# –ò–ª–∏ —Å–±–æ—Ä–∫–∞ –∏–∑ –∏—Å—Ö–æ–¥–Ω–∏–∫–æ–≤
git clone https://github.com/yourusername/MAGRAY_Cli
cd MAGRAY_Cli
make build-cpu

# –°–∫–∞—á–∞—Ç—å –º–æ–¥–µ–ª–∏ –≤—Ä—É—á–Ω—É—é (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
./scripts/download_models.ps1

# –ù–∞—á–∞—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
magray --version
magray status
magray chat "–ü—Ä–∏–≤–µ—Ç! –ö–∞–∫ –¥–µ–ª–∞?"
```

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- **Rust 1.75+** - —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —á–µ—Ä–µ–∑ [rustup](https://rustup.rs/)
- **4GB RAM** –º–∏–Ω–∏–º—É–º (8GB —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
- **2GB –¥–∏—Å–∫–æ–≤–æ–≥–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞** –¥–ª—è –º–æ–¥–µ–ª–µ–π
- **ONNX Runtime** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è

### –ò–∑ –∏—Å—Ö–æ–¥–Ω—ã—Ö –∫–æ–¥–æ–≤

```bash
# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
git clone https://github.com/yourusername/MAGRAY_Cli
cd MAGRAY_Cli

# –°–∫–∞—á–∏–≤–∞–Ω–∏–µ ONNX –º–æ–¥–µ–ª–µ–π
./scripts/download_models.ps1

# –°–±–æ—Ä–∫–∞ –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞
make build-cpu
# –∏–ª–∏ –ø–æ–ª–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞
cargo install --path crates/cli

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏
magray --version
magray status
```

### –í–∞—Ä–∏–∞–Ω—Ç—ã —Å–±–æ—Ä–∫–∏ –ø–æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º

```bash
# CPU-only —Ä–µ–∂–∏–º (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è production)
make build-cpu
cargo build --release --features=cpu

# GPU —É—Å–∫–æ—Ä–µ–Ω–∏–µ (—Ç—Ä–µ–±—É–µ—Ç CUDA)
make build-gpu
cargo build --release --features=gpu

# –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å–±–æ—Ä–∫–∞ (–¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤)
make build-minimal
cargo build --release --features=minimal

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤
make verify-features
```

## üéØ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —á–∞—Ç —Ä–µ–∂–∏–º (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
magray

# –ü—Ä—è–º–æ–π —á–∞—Ç —Å —Å–æ–æ–±—â–µ–Ω–∏–µ–º
magray chat "–ö–∞–∫ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å SQL –∑–∞–ø—Ä–æ—Å?"

# –û–ø–µ—Ä–∞—Ü–∏–∏ —Å —Ñ–∞–π–ª–∞–º–∏
magray read —Ñ–∞–π–ª.txt
magray write –≤—ã–≤–æ–¥.txt "–ü—Ä–∏–≤–µ—Ç –ú–∏—Ä"
magray list ./src

# –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ —á–µ—Ä–µ–∑ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–π —è–∑—ã–∫
magray tool "–ø–æ–∫–∞–∂–∏ git —Å—Ç–∞—Ç—É—Å"
magray tool "—Å–æ–∑–¥–∞–π –Ω–æ–≤—ã–π —Ñ–∞–π–ª —Å hello world"

# –£–º–Ω–æ–µ AI –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –∑–∞–¥–∞—á
magray smart "–ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π –∫–æ–¥–æ–≤—É—é –±–∞–∑—É –∏ –ø—Ä–µ–¥–ª–æ–∂–∏ —É–ª—É—á—à–µ–Ω–∏—è"
```

### –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

```bash
# –û–ø–µ—Ä–∞—Ü–∏–∏ —Å —Å–∏—Å—Ç–µ–º–æ–π –ø–∞–º—è—Ç–∏
magray memory search "–æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫" --layer insights --top-k 20
magray memory add "API –ª–∏–º–∏—Ç 1000 –∑–∞–ø—Ä–æ—Å–æ–≤/–º–∏–Ω" --layer insights
magray memory stats
magray memory backup --name my-backup

# –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ GPU —É—Å–∫–æ—Ä–µ–Ω–∏–µ–º
magray gpu info
magray gpu benchmark --batch-size 100 --compare
magray gpu memory status

# –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —Å–∏—Å—Ç–µ–º—ã
magray status
magray health
```

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–¥–æ–≤–æ–π –±–∞–∑—ã

```
MAGRAY_Cli/
‚îú‚îÄ‚îÄ crates/                 # Rust workspace crates
‚îÇ   ‚îú‚îÄ‚îÄ cli/               # –ì–ª–∞–≤–Ω—ã–π –±–∏–Ω–∞—Ä–Ω–∏–∫ (magray)
‚îÇ   ‚îú‚îÄ‚îÄ llm/               # LLM –∫–ª–∏–µ–Ω—Ç –∞–±—Å—Ç—Ä–∞–∫—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ memory/            # –í–µ–∫—Ç–æ—Ä–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –∏ —Å–ª–æ–∏ –ø–∞–º—è—Ç–∏
‚îÇ   ‚îú‚îÄ‚îÄ ai/                # ONNX –º–æ–¥–µ–ª–∏ –∏ —ç–º–±–µ–¥–¥–∏–Ω–≥–∏
‚îÇ   ‚îú‚îÄ‚îÄ tools/             # –°–∏—Å—Ç–µ–º–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ router/            # AI –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ todo/              # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∞–º–∏
‚îÇ   ‚îî‚îÄ‚îÄ common/            # –û–±—â–∏–µ —É—Ç–∏–ª–∏—Ç—ã
‚îú‚îÄ‚îÄ scripts/               # –°–∫—Ä–∏–ø—Ç—ã —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∏ —É—Ç–∏–ª–∏—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ docker/            # Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
‚îÇ   ‚îú‚îÄ‚îÄ download_*.ps1     # –°–∫—Ä–∏–ø—Ç—ã –∑–∞–≥—Ä—É–∑–∫–∏ –º–æ–¥–µ–ª–µ–π
‚îÇ   ‚îî‚îÄ‚îÄ install_*.ps1      # –°–∫—Ä–∏–ø—Ç—ã —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
‚îú‚îÄ‚îÄ models/                # ONNX –º–æ–¥–µ–ª–∏ (git-ignored)
‚îú‚îÄ‚îÄ docs/                  # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îú‚îÄ‚îÄ .github/               # CI/CD workflows
‚îî‚îÄ‚îÄ Makefile              # –°–∏—Å—Ç–µ–º–∞ —Å–±–æ—Ä–∫–∏
```

### –°–ª–æ–∏ –ø–∞–º—è—Ç–∏

| –°–ª–æ–π | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –í—Ä–µ–º—è –∂–∏–∑–Ω–∏ | –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å |
|------|------------|-------------|-------------------|
| **L1 Interact** | –ö–æ–Ω—Ç–µ–∫—Å—Ç —Ç–µ–∫—É—â–µ–π —Å–µ—Å—Å–∏–∏ | 24 —á–∞—Å–∞ | HNSW –∏–Ω–¥–µ–∫—Å, <5–º—Å |
| **L2 Insights** | –ò–∑–≤–ª–µ—á—ë–Ω–Ω—ã–µ –∑–Ω–∞–Ω–∏—è | 90 –¥–Ω–µ–π | HNSW –∏–Ω–¥–µ–∫—Å, <8–º—Å |
| **L3 Assets** | –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ | –ë–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π | HNSW –∏–Ω–¥–µ–∫—Å, <10–º—Å |

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤–µ–∫—Ç–æ—Ä–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞

–°–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **hnsw_rs** –æ—Ç Jean-Pierre Both - –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—É—é Rust —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –∞–ª–≥–æ—Ä–∏—Ç–º–∞ Hierarchical Navigable Small World:

- üöÄ **17x –±—ã—Å—Ç—Ä–µ–µ** –ª–∏–Ω–µ–π–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞ –Ω–∞ 5K+ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ö
- üéØ **100% recall** —Å –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
- ‚ö° **–°—É–±–ª–∏–Ω–µ–π–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ** O(log n) –ø—Ä–æ—Ç–∏–≤ O(n)
- üîß **–ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã**: M=24, ef_construction=400, ef_search=100
- üßµ **–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏** –¥–ª—è batch –≤—Å—Ç–∞–≤–æ–∫ –∏ multi-query –ø–æ–∏—Å–∫–∞

**–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –±–µ–Ω—á–º–∞—Ä–∫–æ–≤:**
```
–†–∞–∑–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö   HNSW –≤—Ä–µ–º—è   –õ–∏–Ω–µ–π–Ω–æ–µ –≤—Ä–µ–º—è   –£—Å–∫–æ—Ä–µ–Ω–∏–µ
100 –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤      1.9–º—Å         2.1–º—Å          1.1x
500 –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤      2.9–º—Å        10.5–º—Å          3.6x  
1000 –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤     4.2–º—Å        21.0–º—Å          5.0x
2000 –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤     3.1–º—Å        42.3–º—Å         13.8x
5000 –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤     6.0–º—Å       104.8–º—Å         17.4x
```

## ü§ñ AI –º–æ–¥–µ–ª–∏

MAGRAY CLI –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ ONNX –º–æ–¥–µ–ª–∏ –¥–ª—è –≤–µ–∫—Ç–æ—Ä–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞ –∏ —Ä–µ—Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏—è:

### –ú–æ–¥–µ–ª—å —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤
- **BGE-M3 (BAAI/bge-m3)**
  - –†–∞–∑–º–µ—Ä–Ω–æ—Å—Ç—å: 1024
  - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–Ω–æ–≥–æ—è–∑—ã—á–Ω–æ—Å—Ç–∏ (—Ä—É—Å—Å–∫–∏–π, –∞–Ω–≥–ª–∏–π—Å–∫–∏–π, –∫–∏—Ç–∞–π—Å–∫–∏–π)
  - –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è ONNX Runtime
  - –†–∞–∑–º–µ—Ä –º–æ–¥–µ–ª–∏: ~1.2GB

### –ú–æ–¥–µ–ª—å —Ä–µ—Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏—è  
- **BGE Reranker v2-m3**
  - –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ—Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ–∏—Å–∫–∞
  - –í—ã—Å–æ–∫–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å –Ω–∞ –º–Ω–æ–≥–æ—è–∑—ã—á–Ω—ã—Ö —Ç–µ–∫—Å—Ç–∞—Ö
  - FP16 –∫–≤–∞–Ω—Ç–∏–∑–∞—Ü–∏—è –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
  - –†–∞–∑–º–µ—Ä –º–æ–¥–µ–ª–∏: ~560MB

### –¢–æ–∫–µ–Ω–∏–∑–∞—Ç–æ—Ä
- **XLM-RoBERTa tokenizer**
  - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ 100+ —è–∑—ã–∫–æ–≤
  - Subword —Ç–æ–∫–µ–Ω–∏–∑–∞—Ü–∏—è —Å BPE
  - –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å transformers 0.20+

–ú–æ–¥–µ–ª–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ –∏–ª–∏ —á–µ—Ä–µ–∑:
```bash
./scripts/download_models.ps1
```

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–§–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –≤ `~/.magray/config.toml`:

```toml
[ai]
embed_model = "bge-m3"
embed_batch_size = 32
rerank_model = "bge_reranker_v2_m3"
use_gpu = false
max_sequence_length = 8192

[ai.llm]
provider = "openai"
model = "gpt-4o-mini"
max_tokens = 2048
temperature = 0.7

[memory]
interact_ttl_hours = 24
insights_ttl_days = 90
promote_threshold = 0.8
max_vectors_per_layer = 100000
cache_size_mb = 1024

[memory.hnsw]
max_connections = 24
ef_construction = 400
ef_search = 100

[tools]
enable_network = true
plugin_dir = "~/.magray/plugins"
max_file_size_mb = 100

[logging]
level = "info"
json_output = false
file_output = true
```

## üîß –°–∏—Å—Ç–µ–º–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤

MAGRAY CLI –≤–∫–ª—é—á–∞–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –æ–±—â–∏—Ö –∑–∞–¥–∞—á —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:

### –§–∞–π–ª–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
- **–ß—Ç–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤**: –ü–æ–¥—Å–≤–µ—Ç–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ –¥–ª—è 50+ —è–∑—ã–∫–æ–≤
- **–ó–∞–ø–∏—Å—å —Ñ–∞–π–ª–æ–≤**: –£–º–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π
- **–°–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤**: –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è–º –∏ —Ä–∞–∑–º–µ—Ä—É

### Git –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- **–°—Ç–∞—Ç—É—Å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è**: –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- **–ö–æ–º–º–∏—Ç—ã**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π
- **–ò—Å—Ç–æ—Ä–∏—è**: –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –∏ –¥–∏—Ñ—Ñ–æ–≤

### Shell –∫–æ–º–∞–Ω–¥—ã
- **–ö—Ä–æ—Å—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ**: Windows/Linux/macOS
- **–ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –∏–∑–æ–ª—è—Ü–∏—è**: –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞ –∫ —Å–∏—Å—Ç–µ–º–µ
- **–ü–æ—Ç–æ–∫–æ–≤—ã–π –≤—ã–≤–æ–¥**: –†–µ–∞–ª—Ç–∞–π–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

### Web –ø–æ–∏—Å–∫
- **DuckDuckGo –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**: –ü–æ–∏—Å–∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
- **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤**: –†–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å –ø–æ –¥–æ–º–µ–Ω—É
- **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**: –õ–æ–∫–∞–ª—å–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

–î–æ—Å—Ç—É–ø –∫ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º —á–µ—Ä–µ–∑ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–π —è–∑—ã–∫:
```bash
magray tool "–ø–æ–∫–∞–∂–∏ git —Å—Ç–∞—Ç—É—Å"
magray tool "—Å–æ–∑–¥–∞–π –Ω–æ–≤—ã–π —Ñ–∞–π–ª test.rs —Å —Ñ—É–Ω–∫—Ü–∏–µ–π hello world"
magray tool "–Ω–∞–π–¥–∏ –≤—Å–µ .rs —Ñ–∞–π–ª—ã –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ src"
magray tool "–≤—ã–ø–æ–ª–Ω–∏ cargo test –∏ –ø–æ–∫–∞–∂–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã"
```

## üß™ –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –°–±–æ—Ä–∫–∞ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# Development —Å–±–æ—Ä–∫–∞
make dev-cpu

# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
make test-all

# –ó–∞–ø—É—Å–∫ –±–µ–Ω—á–º–∞—Ä–∫–æ–≤
make bench

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞
make check

# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
cargo doc --open
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Makefile

```bash
# –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
make help

# –°–±–æ—Ä–∫–∞ —Ä–∞–∑–Ω—ã—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤
make build-cpu      # CPU-only —Å–±–æ—Ä–∫–∞
make build-gpu      # GPU —É—Å–∫–æ—Ä–µ–Ω–∏–µ
make build-minimal  # –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å–±–æ—Ä–∫–∞
make build-all      # –í—Å–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
make test           # –ë–∞–∑–æ–≤—ã–µ —Ç–µ—Å—Ç—ã
make test-all       # –í—Å–µ feature combinations
make verify-features # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏

# Docker
make docker-build   # –°–±–æ—Ä–∫–∞ Docker –æ–±—Ä–∞–∑–æ–≤
make docker-test    # –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤

# –ê–Ω–∞–ª–∏–∑
make size-analysis  # –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–æ–≤ –±–∏–Ω–∞—Ä–Ω–∏–∫–æ–≤
make perf-test      # –ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

# –£—Ç–∏–ª–∏—Ç—ã
make clean          # –û—á–∏—Å—Ç–∫–∞ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤
make release        # –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Ä–µ–ª–∏–∑–∞
```

### Docker —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

```bash
# CPU-only –¥–ª—è production —Å–µ—Ä–≤–µ—Ä–æ–≤
docker build -f scripts/docker/Dockerfile.cpu -t magray:cpu .
docker run -it magray:cpu

# GPU –¥–ª—è —Ä–∞–±–æ—á–∏—Ö —Å—Ç–∞–Ω—Ü–∏–π
docker build -f scripts/docker/Dockerfile.gpu -t magray:gpu .
docker run --gpus all -it magray:gpu

# Minimal –¥–ª—è edge —É—Å—Ç—Ä–æ–π—Å—Ç–≤
docker build -f scripts/docker/Dockerfile.minimal -t magray:minimal .
docker run -it magray:minimal

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ docker-compose
cd scripts/docker
docker-compose --profile cpu up    # CPU —Ä–µ–∂–∏–º
docker-compose --profile gpu up    # GPU —Ä–µ–∂–∏–º
docker-compose --profile benchmark up  # Benchmark
```

### CI/CD Pipeline

–ü—Ä–æ–µ–∫—Ç –≤–∫–ª—é—á–∞–µ—Ç comprehensive CI/CD pipeline —Å:

- **Multi-platform builds**: Linux, Windows, macOS
- **Feature matrix testing**: CPU, GPU, minimal —Ä–µ–∂–∏–º—ã
- **Performance benchmarks**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ
- **Binary analysis**: –†–∞–∑–º–µ—Ä—ã –∏ –º–µ—Ç—Ä–∏–∫–∏
- **Docker testing**: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
- **Release automation**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—É–±–ª–∏–∫–∞—Ü–∏—è

```bash
# –õ–æ–∫–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ push
make check
make test-all
make docker-test
```

### –£—á–∞—Å—Ç–∏–µ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ

1. –§–æ—Ä–∫–Ω—É—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
2. –°–æ–∑–¥–∞—Ç—å feature –≤–µ—Ç–∫—É (`git checkout -b feature/amazing-feature`)
3. –°–¥–µ–ª–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏ —Ç–µ—Å—Ç—ã (`make test-all`)
4. –ö–æ–º–º–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π (`git commit -m 'Add amazing feature'`)
5. Push –≤ –≤–µ—Ç–∫—É (`git push origin feature/amazing-feature`)
6. –û—Ç–∫—Ä—ã—Ç—å Pull Request

## üìä –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

–ë–µ–Ω—á–º–∞—Ä–∫–∏ –Ω–∞ Intel i7-14700K + RTX 4070:

| –û–ø–µ—Ä–∞—Ü–∏—è | –í—Ä–µ–º—è | –ü—Ä–∏–º–µ—á–∞–Ω–∏—è |
|----------|-------|------------|
| –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —ç–º–±–µ–¥–¥–∏–Ω–≥–∞ | 15–º—Å | Batch –∏–∑ 32 |
| –í–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫ (1M docs) | 5–º—Å | HNSW –∏–Ω–¥–µ–∫—Å (hnsw_rs) |
| –†–µ—Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏–µ (32 —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞) | 12–º—Å | FP16 –∫–≤–∞–Ω—Ç–∏–∑–∞—Ü–∏—è |
| –ü—Ä–æ–¥–≤–∏–∂–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏ | 45–º—Å | Async —Ñ–æ–Ω–æ–≤–∞—è –∑–∞–¥–∞—á–∞ |
| –•–æ–ª–æ–¥–Ω—ã–π —Å—Ç–∞—Ä—Ç | 150–º—Å | CPU —Ä–µ–∂–∏–º |
| –•–æ–ª–æ–¥–Ω—ã–π —Å—Ç–∞—Ä—Ç | 300–º—Å | GPU —Ä–µ–∂–∏–º |

### –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏

| –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–µ–∫—Ç–æ—Ä–æ–≤ | –ü–∞–º—è—Ç—å RAM | –í—Ä–µ–º—è –ø–æ–∏—Å–∫–∞ | –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è |
|-------------------|------------|--------------|------------|
| 10K –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ | 50MB | 2–º—Å | 5 —Å–µ–∫ |
| 100K –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ | 400MB | 4–º—Å | 45 —Å–µ–∫ |
| 1M –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ | 3.2GB | 6–º—Å | 8 –º–∏–Ω |
| 10M –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ | 28GB | 8–º—Å | 75 –º–∏–Ω |

## üõ†Ô∏è Troubleshooting

### –ß–∞—Å—Ç–æ –≤—Å—Ç—Ä–µ—á–∞—é—â–∏–µ—Å—è –ø—Ä–æ–±–ª–µ–º—ã

**–û—à–∏–±–∫–∞ "Model not found"**
```bash
# –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å –º–æ–¥–µ–ª–∏
./scripts/download_models.ps1

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –º–æ–¥–µ–ª–∏
ls models/
magray status
```

**–í—ã—Å–æ–∫–æ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏**
```bash
# –£–º–µ–Ω—å—à–∏—Ç—å —Ä–∞–∑–º–µ—Ä—ã batch –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
# –û—á–∏—Å—Ç–∏—Ç—å –∫—ç—à –≤–µ–∫—Ç–æ—Ä–æ–≤
rm -rf ~/.magray/cache/embeddings.db

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–∞–º—è—Ç–∏
magray memory stats
```

**–û—à–∏–±–∫–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã
magray tool "list available tools"

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–∫—Ä—É–∂–µ–Ω–∏–µ
echo $PATH
magray health
```

**GPU –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å CUDA —É—Å—Ç–∞–Ω–æ–≤–∫—É
nvidia-smi
magray gpu info

# –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –≤–∫–ª—é—á–∏—Ç—å CPU —Ä–µ–∂–∏–º
export MAGRAY_FORCE_CPU=1
magray status
```

**–ü—Ä–æ–±–ª–µ–º—ã —Å ONNX Runtime**
```bash
# –ü–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å ONNX Runtime
./scripts/install_onnxruntime.ps1

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
ldd target/release/magray  # Linux
otool -L target/release/magray  # macOS
```

### –õ–æ–≥–∏ –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

```bash
# –ü–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏
RUST_LOG=debug magray status

# JSON –ª–æ–≥–∏ –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞
RUST_LOG=info LOG_FORMAT=json magray chat "test"

# –õ–æ–≥–∏ –≤ —Ñ–∞–π–ª
RUST_LOG=debug LOG_FILE=magray.log magray status

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
RUST_LOG=debug magray memory benchmark
```

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ](docs/ARCHITECTURE.md)
- [–°–∏—Å—Ç–µ–º–∞ –ø–∞–º—è—Ç–∏ - –¥–µ—Ç–∞–ª—å–Ω—ã–π –æ–±–∑–æ—Ä](docs/MEMORY.md)
- [–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Å–∏—Å—Ç–µ–º–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤](docs/TOOLS.md)
- [API Reference](https://docs.rs/magray)
- [–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞](docs/CONFIGURATION.md)
- [–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ](docs/DEVELOPMENT.md)

## üöÄ Roadmap

### v0.2.0 - Enhanced AI
- [ ] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Ollama –¥–ª—è –ª–æ–∫–∞–ª—å–Ω—ã—Ö LLM
- [ ] –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π embedding server
- [ ] Advanced retrieval strategies
- [ ] Multi-modal –ø–æ–¥–¥–µ—Ä–∂–∫–∞ (–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è)

### v0.3.0 - Enterprise Features  
- [ ] Distributed memory clusters
- [ ] Advanced security –∏ RBAC
- [ ] Metrics –∏ monitoring dashboard
- [ ] Plugin ecosystem

### v1.0.0 - Production Ready
- [ ] –°—Ç–∞–±–∏–ª—å–Ω—ã–π API
- [ ] Comprehensive documentation
- [ ] Performance optimizations
- [ ] Enterprise support

## ü§ù –°–æ–æ–±—â–µ—Å—Ç–≤–æ

- [GitHub Discussions](https://github.com/yourusername/MAGRAY_Cli/discussions)
- [Discord Server](https://discord.gg/magray)
- [Telegram Chat](https://t.me/magray_cli)
- [Reddit Community](https://reddit.com/r/magray)

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–ü—Ä–æ–µ–∫—Ç –ª–∏—Ü–µ–Ω–∑–∏—Ä–æ–≤–∞–Ω –ø–æ–¥ MIT License - —Å–º–æ—Ç—Ä–∏—Ç–µ —Ñ–∞–π–ª [LICENSE](LICENSE) –¥–ª—è –¥–µ—Ç–∞–ª–µ–π.

## üôè –ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏

- [hnsw_rs](https://github.com/jean-pierreBoth/hnswlib-rs) –æ—Ç Jean-Pierre Both –∑–∞ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—É—é HNSW —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é
- [ONNX Runtime](https://onnxruntime.ai/) –∑–∞ –±—ã—Å—Ç—Ä—ã–π inference
- [Tokio](https://tokio.rs/) –∑–∞ async runtime
- [BGE models](https://github.com/FlagOpen/FlagEmbedding) –∑–∞ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —ç–º–±–µ–¥–¥–∏–Ω–≥–∏
- –°–æ–æ–±—â–µ—Å—Ç–≤–æ Rust –∑–∞ —É–¥–∏–≤–∏—Ç–µ–ª—å–Ω—ã–µ –∫—Ä–µ–π—Ç—ã

---

–°–æ–∑–¥–∞–Ω —Å ‚ù§Ô∏è –Ω–∞ Rust | [–ü–æ—Å—Ç–∞–≤—å—Ç–µ –∑–≤–µ–∑–¥—É –Ω–∞ GitHub!](https://github.com/yourusername/MAGRAY_Cli) ‚≠ê