# –°–∫—Ä–∏–ø—Ç —Å—Ä–∞–≤–Ω–µ–Ω–∏—è ONNX –º–æ–¥–µ–ª–µ–π BGE

## –û–ø–∏—Å–∞–Ω–∏–µ

–°–∫—Ä–∏–ø—Ç `compare_models.py` –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–≥–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –∫–∞—á–µ—Å—Ç–≤–∞ –¥–≤—É—Ö ONNX –º–æ–¥–µ–ª–µ–π BGE:

1. **–ö–≤–∞–Ω—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è INT8 –º–æ–¥–µ–ª—å**: `bge-code-v1-int8/model.onnx`
2. **–û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–∞—è FP32 –º–æ–¥–µ–ª—å**: `1111/model.onnx`

## –ß—Ç–æ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Å–∫—Ä–∏–ø—Ç

### üìã –û–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
- –†–∞–∑–º–µ—Ä—ã —Ñ–∞–π–ª–æ–≤ –º–æ–¥–µ–ª–µ–π
- –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤—Ö–æ–¥–æ–≤ –∏ –≤—ã—Ö–æ–¥–æ–≤
- –ü—Ä–∏–±–ª–∏–∑–∏—Ç–µ–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

### ‚ö° –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- –í—Ä–µ–º—è inference (—Å—Ä–µ–¥–Ω–µ–µ, –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ, –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ)
- –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- –ü—Ä–æ–≥—Ä–µ–≤ –º–æ–¥–µ–ª–µ–π –ø–µ—Ä–µ–¥ –∏–∑–º–µ—Ä–µ–Ω–∏—è–º–∏

### üéØ –ö–∞—á–µ—Å—Ç–≤–æ embeddings
- –ö–æ—Å–∏–Ω—É—Å–Ω–æ–µ —Å—Ö–æ–¥—Å—Ç–≤–æ –º–µ–∂–¥—É embeddings –¥–≤—É—Ö –º–æ–¥–µ–ª–µ–π
- –ö–æ—Ä—Ä–µ–ª—è—Ü–∏—è –º–∞—Ç—Ä–∏—Ü —Å—Ö–æ–¥—Å—Ç–≤–∞
- –°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å –∫–∞—á–µ—Å—Ç–≤–∞ –ø–æ —Ä–∞–∑–Ω—ã–º –≤—Ö–æ–¥–Ω—ã–º –¥–∞–Ω–Ω—ã–º

## –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∑–∞–ø—É—Å–∫–∞

```
================================================================================
–°–†–ê–í–ù–ï–ù–ò–ï ONNX –ú–û–î–ï–õ–ï–ô BGE
================================================================================

[INFO] –û–ë–©–ê–Ø –ò–ù–§–û–†–ú–ê–¶–ò–Ø:
+-------------------+---------------------------------------+-----------------------------------+
| –ü–∞—Ä–∞–º–µ—Ç—Ä          | BGE-Code-v1-INT8 (–ö–≤–∞–Ω—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è)   | BGE-Code-v1-FP32 (–û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–∞—è)   |
+===================+=======================================+===================================+
| –ü—É—Ç—å –∫ –º–æ–¥–µ–ª–∏     | bge-code-v1-int8\model.onnx           | 1111\model.onnx                   |
+-------------------+---------------------------------------+-----------------------------------+
| –†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ (MB) | 1476.20                               | 4.51                              |
+-------------------+---------------------------------------+-----------------------------------+
| –°–∂–∞—Ç–∏–µ —Ä–∞–∑–º–µ—Ä–∞    | 327.32x                               | 1.00x (–±–∞–∑–æ–≤–∞—è)                   |
+-------------------+---------------------------------------+-----------------------------------+

[PERF] –ü–†–û–ò–ó–í–û–î–ò–¢–ï–õ–¨–ù–û–°–¢–¨ (INFERENCE):
+----------------------+---------------------------------------+-----------------------------------+----------------+
| –ú–µ—Ç—Ä–∏–∫–∞              |   BGE-Code-v1-INT8 (–ö–≤–∞–Ω—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è) |   BGE-Code-v1-FP32 (–û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–∞—è) | –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ   |
+======================+=======================================+===================================+================+
| –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è (–º—Å)   |                                528.77 |                            532.3  | 1.01x –±—ã—Å—Ç—Ä–µ–µ  |
+----------------------+---------------------------------------+-----------------------------------+----------------+

[QUALITY] –ö–ê–ß–ï–°–¢–í–û EMBEDDINGS:
+-----------------------------+------------+------------------------------------+
| –ú–µ—Ç—Ä–∏–∫–∞                     |   –ó–Ω–∞—á–µ–Ω–∏–µ | –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è                      |
+=============================+============+====================================+
| –°—Ä–µ–¥–Ω–µ–µ –∫–æ—Å–∏–Ω—É—Å–Ω–æ–µ —Å—Ö–æ–¥—Å—Ç–≤–æ |     0.779  | –ë–ª–∏–∑–æ—Å—Ç—å –∫ 1.0 = –≤—ã—Å–æ–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ  |
+-----------------------------+------------+------------------------------------+

[VERDICT] –í–ï–†–î–ò–ö–¢ –ü–û –ö–ê–ß–ï–°–¢–í–£: [BAD] –ü–õ–û–•–û–ï - –ó–Ω–∞—á–∏—Ç–µ–ª—å–Ω–∞—è –¥–µ–≥—Ä–∞–¥–∞—Ü–∏—è –∫–∞—á–µ—Å—Ç–≤–∞

[SUMMARY] –ò–¢–û–ì–û–í–û–ï –°–†–ê–í–ù–ï–ù–ò–ï:
+---------------------+------------------------+-------------------+--------------+
| –ö—Ä–∏—Ç–µ—Ä–∏–π            | INT8 –º–æ–¥–µ–ª—å            | FP32 –º–æ–¥–µ–ª—å       | –ü–æ–±–µ–¥–∏—Ç–µ–ª—å   |
+=====================+========================+===================+==============+
| –†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞        | [+] 327.32x –º–µ–Ω—å—à–µ     | [-] –ë–æ–ª—å—à–µ        | INT8         |
+---------------------+------------------------+-------------------+--------------+
| –°–∫–æ—Ä–æ—Å—Ç—å inference  | [+] –ë—ã—Å—Ç—Ä–µ–µ            | [-] –ú–µ–¥–ª–µ–Ω–Ω–µ–µ     | INT8         |
+---------------------+------------------------+-------------------+--------------+
| –ö–∞—á–µ—Å—Ç–≤–æ embeddings | [!] 77.9% –æ—Ç –æ—Ä–∏–≥–∏–Ω–∞–ª–∞ | [+] 100% (—ç—Ç–∞–ª–æ–Ω) | FP32         |
+---------------------+------------------------+-------------------+--------------+

[RECOMMENDATIONS] –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò:
[WARNING] –†–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ —É–ª—É—á—à–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞ –∫–≤–∞–Ω—Ç–∏–∑–∞—Ü–∏–∏:
   ‚Ä¢ –ö–∞—á–µ—Å—Ç–≤–æ INT8 –º–æ–¥–µ–ª–∏ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–ø—Ä–∏–µ–º–ª–µ–º—ã–º
   ‚Ä¢ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ FP32 –º–æ–¥–µ–ª—å –∏–ª–∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –¥—Ä—É–≥–∏–µ –º–µ—Ç–æ–¥—ã –∫–≤–∞–Ω—Ç–∏–∑–∞—Ü–∏–∏
```

## –ö–ª—é—á–µ–≤—ã–µ –≤—ã–≤–æ–¥—ã

### ‚ùå –ü—Ä–æ–±–ª–µ–º—ã —Å —Ç–µ–∫—É—â–µ–π –∫–≤–∞–Ω—Ç–∏–∑–∞—Ü–∏–µ–π
- **–ù–µ–æ–∂–∏–¥–∞–Ω–Ω–æ –±–æ–ª—å—à–æ–π —Ä–∞–∑–º–µ—Ä**: INT8 –º–æ–¥–µ–ª—å –≤–µ—Å–∏—Ç 1.5GB –≤–º–µ—Å—Ç–æ –æ–∂–∏–¥–∞–µ–º—ã—Ö ~400MB
- **–ù–∏–∑–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ**: –ö–æ—Å–∏–Ω—É—Å–Ω–æ–µ —Å—Ö–æ–¥—Å—Ç–≤–æ 77.9% —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—É—é –ø–æ—Ç–µ—Ä—é –∫–∞—á–µ—Å—Ç–≤–∞
- **–í–æ–∑–º–æ–∂–Ω–∞—è –æ—à–∏–±–∫–∞ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –∫–≤–∞–Ω—Ç–∏–∑–∞—Ü–∏–∏**: –†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ –±–æ–ª—å—à–µ –æ—Ä–∏–≥–∏–Ω–∞–ª–∞ –≤ 327 —Ä–∞–∑

### üîç –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º
1. **–†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞**: –û—á–µ–≤–∏–¥–Ω–æ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫ –ø—Ä–∏ –∫–≤–∞–Ω—Ç–∏–∑–∞—Ü–∏–∏
2. **–ö–∞—á–µ—Å—Ç–≤–æ embeddings**: 77.9% —Å—Ö–æ–¥—Å—Ç–≤–æ –∫—Ä–∏—Ç–∏—á–Ω–æ –Ω–∏–∑–∫–æ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
3. **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: –ü–µ—Ä–µ—Å–º–æ—Ç—Ä–µ—Ç—å –ø—Ä–æ—Ü–µ—Å—Å –∫–≤–∞–Ω—Ç–∏–∑–∞—Ü–∏–∏

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
```bash
pip install onnxruntime transformers scikit-learn tabulate numpy
```

### –ó–∞–ø—É—Å–∫
```bash
python compare_models.py
```

### –í—ã—Ö–æ–¥–Ω—ã–µ —Ñ–∞–π–ª—ã
- **model_comparison_results.json**: –î–µ—Ç–∞–ª—å–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ JSON —Ñ–æ—Ä–º–∞—Ç–µ
- **–ö–æ–Ω—Å–æ–ª—å–Ω—ã–π –≤—ã–≤–æ–¥**: –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è

## –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ

–°–∫—Ä–∏–ø—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç 10 —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –ø—Ä–∏–º–µ—Ä–æ–≤ –∫–æ–¥–∞ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:
- Python —Ñ—É–Ω–∫—Ü–∏–∏ –∏ –∫–ª–∞—Å—Å—ã  
- SQL –∑–∞–ø—Ä–æ—Å—ã
- JavaScript –∫–æ–¥
- Go –ø—Ä–æ–≥—Ä–∞–º–º—ã
- Rust —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
- –ò –¥—Ä.

–≠—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Ä–µ–ø—Ä–µ–∑–µ–Ω—Ç–∞—Ç–∏–≤–Ω—É—é –æ—Ü–µ–Ω–∫—É –∫–∞—á–µ—Å—Ç–≤–∞ embeddings –¥–ª—è –∫–æ–¥–∞.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–∫—Ä–∏–ø—Ç–∞

### –ö–ª–∞—Å—Å—ã
- **ModelComparator**: –û—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∞—Å—Å –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –º–æ–¥–µ–ª–µ–π

### –ú–µ—Ç–æ–¥—ã
- `get_model_info()`: –ê–Ω–∞–ª–∏–∑ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –º–æ–¥–µ–ª–∏
- `benchmark_model()`: –ò–∑–º–µ—Ä–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏  
- `get_embeddings()`: –ü–æ–ª—É—á–µ–Ω–∏–µ embeddings
- `compare_embeddings_quality()`: –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –∫–∞—á–µ—Å—Ç–≤–∞
- `print_comparison_table()`: –í—ã–≤–æ–¥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

## Troubleshooting

### –ü—Ä–æ–±–ª–µ–º—ã —Å –∫–æ–¥–∏—Ä–æ–≤–∫–æ–π
–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–∞—é—Ç –ø—Ä–æ–±–ª–µ–º—ã —Å Unicode –≤ Windows –∫–æ–Ω—Å–æ–ª–∏, —Å–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–º–µ–Ω—è–µ—Ç —ç–º–æ–¥–∑–∏ –Ω–∞ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ —Å–∏–º–≤–æ–ª—ã.

### –¢–æ–∫–µ–Ω–∏–∑–∞—Ç–æ—Ä
–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—â–µ—Ç —Ç–æ–∫–µ–Ω–∏–∑–∞—Ç–æ—Ä –≤ –ø–∞–ø–∫–∞—Ö —Å –º–æ–¥–µ–ª—è–º–∏ –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç fallback —Ç–æ–∫–µ–Ω–∏–∑–∞—Ç–æ—Ä `BAAI/bge-m3`.

### –ü—Ä–æ–≤–∞–π–¥–µ—Ä—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `CPUExecutionProvider`. –î–ª—è GPU –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –Ω—É–∂–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `onnxruntime-gpu`.